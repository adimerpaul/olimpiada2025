import{k as D,ak as wt,al as Gt,j as xt,G as Kt,am as ea,g as Yt,H as ta,an as aa,r as U,ao as la,J as ce,$ as ut,l as _,ap as he,m as na,aq as oa,f as F,ar as ra,h as St,_ as sa,c as it,o as Q,w as x,a as g,Q as dt,e as we,b as w,af as z,d as E,a6 as ct,ag as P,ah as xe,ai as Ye,t as $,a7 as ne,a4 as J,p as ft,aj as ua,as as ia}from"./index-jAtVda68.js";import{Q as da}from"./QChip-vHBen2Fk.js";import{Q as mt}from"./QTooltip-Aor1w5-g.js";import{Q as ca}from"./QMarkupTable-BHQNhkmW.js";import{Q as fa,a as ma}from"./QInnerLoading-BD4b0rUi.js";import{Q as va}from"./QSpace-B8UQVP7_.js";import{p as Y,u as ha,a as ga,Q as ya}from"./format-DobST3mF.js";import{Q as vt}from"./QBanner-CPehtJtH.js";import{Q as _a}from"./QForm-aYYd9gDc.js";import{Q as pa}from"./QPage-CpBbOVym.js";import{C as ht}from"./ClosePopup-DtvJe4_Y.js";function Ma(){let e=Object.create(null);return{getCache:(l,s)=>e[l]===void 0?e[l]=typeof s=="function"?s():s:e[l],setCache(l,s){e[l]=s},hasCache(l){return Object.hasOwnProperty.call(e,l)},clearCache(l){l!==void 0?delete e[l]:e=Object.create(null)}}}const te=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Da(e,l,s){return Object.prototype.toString.call(e)==="[object Date]"&&(s=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),Ya(Ze(e,l,s))}function gt(e,l,s){return Vt(xa(e,l,s))}function ba(e){return wa(e)===0}function Ce(e,l){return l<=6?31:l<=11||ba(e)?30:29}function wa(e){const l=te.length;let s=te[0],d,o,u,r,i;if(e<s||e>=te[l-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<l&&(d=te[i],o=d-s,!(e<d));i+=1)s=d;return r=e-s,o-r<6&&(r=r-o+q(o+4,33)*33),u=B(B(r+1,33)-1,4),u===-1&&(u=4),u}function Ct(e,l){const s=te.length,d=e+621;let o=-14,u=te[0],r,i,h,k,m;if(e<u||e>=te[s-1])throw new Error("Invalid Jalaali year "+e);for(m=1;m<s&&(r=te[m],i=r-u,!(e<r));m+=1)o=o+q(i,33)*8+q(B(i,33),4),u=r;k=e-u,o=o+q(k,33)*8+q(B(k,33)+3,4),B(i,33)===4&&i-k===4&&(o+=1);const p=q(d,4)-q((q(d,100)+1)*3,4)-150,A=20+o-p;return l||(i-k<6&&(k=k-i+q(i+4,33)*33),h=B(B(k+1,33)-1,4),h===-1&&(h=4)),{leap:h,gy:d,march:A}}function xa(e,l,s){const d=Ct(e,!0);return Ze(d.gy,3,d.march)+(l-1)*31-q(l,7)*(l-7)+s-1}function Ya(e){const l=Vt(e).gy;let s=l-621,d,o,u;const r=Ct(s,!1),i=Ze(l,3,r.march);if(u=e-i,u>=0){if(u<=185)return o=1+q(u,31),d=B(u,31)+1,{jy:s,jm:o,jd:d};u-=186}else s-=1,u+=179,r.leap===1&&(u+=1);return o=7+q(u,30),d=B(u,30)+1,{jy:s,jm:o,jd:d}}function Ze(e,l,s){let d=q((e+q(l-8,6)+100100)*1461,4)+q(153*B(l+9,12)+2,5)+s-34840408;return d=d-q(q(e+100100+q(l-8,6),100)*3,4)+752,d}function Vt(e){let l=4*e+139361631;l=l+q(q(4*e+183187720,146097)*3,4)*4-3908;const s=q(B(l,1461),4)*5+308,d=q(B(s,153),5)+1,o=B(q(s,153),12)+1;return{gy:q(l,1461)-100100+q(8-o,6),gm:o,gd:d}}function q(e,l){return~~(e/l)}function B(e,l){return e-~~(e/l)*l}const Sa=["gregorian","persian"],yt={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Sa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ca=["update:modelValue"];function K(e){return e.year+"/"+Y(e.month)+"/"+Y(e.day)}function Va(e,l){const s=D(()=>e.disable!==!0&&e.readonly!==!0),d=D(()=>s.value===!0?0:-1),o=D(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function u(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function r(i){const h=new Date,k=i===!0?null:0;if(e.calendar==="persian"){const m=Da(h);return{year:m.jy,month:m.jm,day:m.jd}}return{year:h.getFullYear(),month:h.getMonth()+1,day:h.getDate(),hour:k,minute:k,second:k,millisecond:k}}return{editable:s,tabindex:d,headerClass:o,getLocale:u,getCurrentDate:r}}const qt=864e5,qa=36e5,Ue=6e4,kt="YYYY-MM-DDTHH:mm:ss.SSSZ",ka=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ha=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Le={};function Oa(e,l){const s="("+l.days.join("|")+")",d=e+s;if(Le[d]!==void 0)return Le[d];const o="("+l.daysShort.join("|")+")",u="("+l.months.join("|")+")",r="("+l.monthsShort.join("|")+")",i={};let h=0;const k=e.replace(Ha,p=>{switch(h++,p){case"YY":return i.YY=h,"(-?\\d{1,2})";case"YYYY":return i.YYYY=h,"(-?\\d{1,4})";case"M":return i.M=h,"(\\d{1,2})";case"Mo":return i.M=h++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return i.M=h,"(\\d{2})";case"MMM":return i.MMM=h,r;case"MMMM":return i.MMMM=h,u;case"D":return i.D=h,"(\\d{1,2})";case"Do":return i.D=h++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=h,"(\\d{2})";case"H":return i.H=h,"(\\d{1,2})";case"HH":return i.H=h,"(\\d{2})";case"h":return i.h=h,"(\\d{1,2})";case"hh":return i.h=h,"(\\d{2})";case"m":return i.m=h,"(\\d{1,2})";case"mm":return i.m=h,"(\\d{2})";case"s":return i.s=h,"(\\d{1,2})";case"ss":return i.s=h,"(\\d{2})";case"S":return i.S=h,"(\\d{1})";case"SS":return i.S=h,"(\\d{2})";case"SSS":return i.S=h,"(\\d{3})";case"A":return i.A=h,"(AM|PM)";case"a":return i.a=h,"(am|pm)";case"aa":return i.aa=h,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"do":return h++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return h++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return h++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return i.Z=h,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=h,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=h,"(-?\\d+)";case"x":return i.x=h,"(-?\\d{4,})";default:return h--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),m={map:i,regex:new RegExp("^"+k)};return Le[d]=m,m}function Ht(e,l){return e!==void 0?e:l!==void 0?l.date:Gt.date}function _t(e,l=""){const s=e>0?"-":"+",d=Math.abs(e),o=Math.floor(d/60),u=d%60;return s+Y(o)+l+Y(u)}function ja(e,l,s,d,o){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(o!==void 0&&Object.assign(u,o),e==null||e===""||typeof e!="string")return u;l===void 0&&(l=kt);const r=Ht(s,wt.props),i=r.months,h=r.monthsShort,{regex:k,map:m}=Oa(l,r),p=e.match(k);if(p===null)return u;let A="";if(m.X!==void 0||m.x!==void 0){const O=parseInt(p[m.X!==void 0?m.X:m.x],10);if(isNaN(O)===!0||O<0)return u;const j=new Date(O*(m.X!==void 0?1e3:1));u.year=j.getFullYear(),u.month=j.getMonth()+1,u.day=j.getDate(),u.hour=j.getHours(),u.minute=j.getMinutes(),u.second=j.getSeconds(),u.millisecond=j.getMilliseconds()}else{if(m.YYYY!==void 0)u.year=parseInt(p[m.YYYY],10);else if(m.YY!==void 0){const O=parseInt(p[m.YY],10);u.year=O<0?O:2e3+O}if(m.M!==void 0){if(u.month=parseInt(p[m.M],10),u.month<1||u.month>12)return u}else m.MMM!==void 0?u.month=h.indexOf(p[m.MMM])+1:m.MMMM!==void 0&&(u.month=i.indexOf(p[m.MMMM])+1);if(m.D!==void 0){if(u.day=parseInt(p[m.D],10),u.year===null||u.month===null||u.day<1)return u;const O=d!=="persian"?new Date(u.year,u.month,0).getDate():Ce(u.year,u.month);if(u.day>O)return u}m.H!==void 0?u.hour=parseInt(p[m.H],10)%24:m.h!==void 0&&(u.hour=parseInt(p[m.h],10)%12,(m.A&&p[m.A]==="PM"||m.a&&p[m.a]==="pm"||m.aa&&p[m.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),m.m!==void 0&&(u.minute=parseInt(p[m.m],10)%60),m.s!==void 0&&(u.second=parseInt(p[m.s],10)%60),m.S!==void 0&&(u.millisecond=parseInt(p[m.S],10)*10**(3-p[m.S].length)),(m.Z!==void 0||m.ZZ!==void 0)&&(A=m.Z!==void 0?p[m.Z].replace(":",""):p[m.ZZ],u.timezoneOffset=(A[0]==="+"?-1:1)*(60*A.slice(1,3)+1*A.slice(3,5)))}return u.dateHash=Y(u.year,6)+"/"+Y(u.month)+"/"+Y(u.day),u.timeHash=Y(u.hour)+":"+Y(u.minute)+":"+Y(u.second)+A,u}function Be(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const s=new Date(l.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const d=l.getTimezoneOffset()-s.getTimezoneOffset();l.setHours(l.getHours()-d);const o=(l-s)/(qt*7);return 1+Math.floor(o)}function W(e,l,s){const d=new Date(e),o=`set${s===!0?"UTC":""}`;switch(l){case"year":case"years":d[`${o}Month`](0);case"month":case"months":d[`${o}Date`](1);case"day":case"days":case"date":d[`${o}Hours`](0);case"hour":case"hours":d[`${o}Minutes`](0);case"minute":case"minutes":d[`${o}Seconds`](0);case"second":case"seconds":d[`${o}Milliseconds`](0)}return d}function Se(e,l,s){return(e.getTime()-e.getTimezoneOffset()*Ue-(l.getTime()-l.getTimezoneOffset()*Ue))/s}function Ot(e,l,s="days"){const d=new Date(e),o=new Date(l);switch(s){case"years":case"year":return d.getFullYear()-o.getFullYear();case"months":case"month":return(d.getFullYear()-o.getFullYear())*12+d.getMonth()-o.getMonth();case"days":case"day":case"date":return Se(W(d,"day"),W(o,"day"),qt);case"hours":case"hour":return Se(W(d,"hour"),W(o,"hour"),qa);case"minutes":case"minute":return Se(W(d,"minute"),W(o,"minute"),Ue);case"seconds":case"second":return Se(W(d,"second"),W(o,"second"),1e3)}}function Re(e){return Ot(e,W(e,"year"),"days")+1}function ie(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const pt={YY(e,l,s){const d=this.YYYY(e,l,s)%100;return d>=0?Y(d):"-"+Y(Math.abs(d))},YYYY(e,l,s){return s??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return ie(e.getMonth()+1)},MM(e){return Y(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return ie(this.Q(e))},D(e){return e.getDate()},Do(e){return ie(e.getDate())},DD(e){return Y(e.getDate())},DDD(e){return Re(e)},DDDo(e){return ie(Re(e))},DDDD(e){return Y(Re(e),3)},d(e){return e.getDay()},do(e){return ie(e.getDay())},dd(e,l){return l.days[e.getDay()].slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Be(e)},wo(e){return ie(Be(e))},ww(e){return Y(Be(e))},H(e){return e.getHours()},HH(e){return Y(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return Y(this.h(e))},m(e){return e.getMinutes()},mm(e){return Y(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Y(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Y(Math.floor(e.getMilliseconds()/10))},SSS(e){return Y(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,l,s,d){const o=d??e.getTimezoneOffset();return _t(o,":")},ZZ(e,l,s,d){const o=d??e.getTimezoneOffset();return _t(o)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Ta(e,l,s,d,o){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;l===void 0&&(l=kt);const r=Ht(s,wt.props);return l.replace(ka,(i,h)=>i in pt?pt[i](u,r,d,o):h===void 0?i:h.split("\\]").join("]"))}const X=20,Ia=["Calendar","Years","Months"],Mt=e=>Ia.includes(e),Pe=e=>/^-?[\d]+\/[0-1]\d$/.test(e),de=" — ";function ee(e){return e.year+"/"+Y(e.month)}const Dt=xt({name:"QDate",props:{...yt,...ea,...Kt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...yt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Pe},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Pe},navigationMaxYearMonth:{type:String,validator:Pe},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...Ca,"rangeStart","rangeEnd","navigation"],setup(e,{slots:l,emit:s}){const{proxy:d}=Yt(),{$q:o}=d,u=ta(e,o),{getCache:r}=Ma(),{tabindex:i,headerClass:h,getLocale:k,getCurrentDate:m}=Va(e,o);let p;const A=aa(e),O=oa(A),j=U(null),S=U(tt()),C=U(k()),Ve=D(()=>tt()),ze=D(()=>k()),H=D(()=>m()),y=U(at(S.value,C.value)),L=U(e.defaultView),$e=D(()=>o.lang.rtl===!0?"right":"left"),ge=U($e.value),qe=U($e.value),ke=y.value.year,ye=U(ke-ke%X-(ke<0?X:0)),N=U(null),jt=D(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ae=D(()=>e.color||"primary"),oe=D(()=>e.textColor||"white"),_e=D(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),He=D(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Z=D(()=>He.value.filter(t=>typeof t=="string").map(t=>Ee(t,S.value,C.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),re=D(()=>{const t=a=>Ee(a,S.value,C.value);return He.value.filter(a=>la(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),pe=D(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=gt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Oe=D(()=>e.calendar==="persian"?K:(t,a,n)=>Ta(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?S.value:a,n===void 0?C.value:n,t.year,t.timezoneOffset)),fe=D(()=>Z.value.length+re.value.reduce((t,a)=>t+1+Ot(pe.value(a.to),pe.value(a.from)),0)),Je=D(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(N.value!==null){const n=N.value.init,c=pe.value(n);return C.value.daysShort[c.getDay()]+", "+C.value.monthsShort[n.month-1]+" "+n.day+de+"?"}if(fe.value===0)return de;if(fe.value>1)return`${fe.value} ${C.value.pluralDay}`;const t=Z.value[0],a=pe.value(t);return isNaN(a.valueOf())===!0?de:C.value.headerTitle!==void 0?C.value.headerTitle(a,t):C.value.daysShort[a.getDay()]+", "+C.value.monthsShort[t.month-1]+" "+t.day}),Tt=D(()=>Z.value.concat(re.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),It=D(()=>Z.value.concat(re.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),Xe=D(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(fe.value===0)return de;if(fe.value>1){const t=Tt.value,a=It.value,n=C.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+de+n[a.month-1]+" ":t.month!==a.month?de+n[a.month-1]:"")+" "+a.year}return Z.value[0].year}),Me=D(()=>{const t=[o.iconSet.datetime.arrowLeft,o.iconSet.datetime.arrowRight];return o.lang.rtl===!0?t.reverse():t}),We=D(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):C.value.firstDayOfWeek),Et=D(()=>{const t=C.value.daysShort,a=We.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),G=D(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ce(t.year,t.month)}),Ft=D(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),T=D(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),I=D(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),je=D(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return T.value!==null&&T.value.year>=y.value.year&&(t.year.prev=!1,T.value.year===y.value.year&&T.value.month>=y.value.month&&(t.month.prev=!1)),I.value!==null&&I.value.year<=y.value.year&&(t.year.next=!1,I.value.year===y.value.year&&I.value.month<=y.value.month&&(t.month.next=!1)),t}),De=D(()=>{const t={};return Z.value.forEach(a=>{const n=ee(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),Ge=D(()=>{const t={};return re.value.forEach(a=>{const n=ee(a.from),c=ee(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===c?a.to.day:void 0,range:a}),n<c){let f;const{year:b,month:v}=a.from,M=v<12?{year:b,month:v+1}:{year:b+1,month:1};for(;(f=ee(M))<=c;)t[f]===void 0&&(t[f]=[]),t[f].push({from:void 0,to:f===c?a.to.day:void 0,range:a}),M.month++,M.month>12&&(M.year++,M.month=1)}}),t}),me=D(()=>{if(N.value===null)return;const{init:t,initHash:a,final:n,finalHash:c}=N.value,[f,b]=a<=c?[t,n]:[n,t],v=ee(f),M=ee(b);if(v!==R.value&&M!==R.value)return;const V={};return v===R.value?(V.from=f.day,V.includeFrom=!0):V.from=1,M===R.value?(V.to=b.day,V.includeTo=!0):V.to=G.value,V}),R=D(()=>ee(y.value)),Nt=D(()=>{const t={};if(e.options===void 0){for(let n=1;n<=G.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=G.value;n++){const c=R.value+"/"+Y(n);t[n]=a(c)}return t}),Qt=D(()=>{const t={};if(e.events===void 0)for(let a=1;a<=G.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=G.value;n++){const c=R.value+"/"+Y(n);t[n]=a(c)===!0&&Ft.value(c)}}return t}),At=D(()=>{let t,a;const{year:n,month:c}=y.value;if(e.calendar!=="persian")t=new Date(n,c-1,1),a=new Date(n,c-1,0).getDate();else{const f=gt(n,c,1);t=new Date(f.gy,f.gm-1,f.gd);let b=c-1,v=n;b===0&&(b=12,v--),a=Ce(v,b)}return{days:t.getDay()-We.value-1,endDay:a}}),Ke=D(()=>{const t=[],{days:a,endDay:n}=At.value,c=a<0?a+7:a;if(c<6)for(let v=n-c;v<=n;v++)t.push({i:v,fill:!0});const f=t.length;for(let v=1;v<=G.value;v++){const M={i:v,event:Qt.value[v],classes:[]};Nt.value[v]===!0&&(M.in=!0,M.flat=!0),t.push(M)}if(De.value[R.value]!==void 0&&De.value[R.value].forEach(v=>{const M=f+v-1;Object.assign(t[M],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:oe.value})}),Ge.value[R.value]!==void 0&&Ge.value[R.value].forEach(v=>{if(v.from!==void 0){const M=f+v.from-1,V=f+(v.to||G.value)-1;for(let ve=M;ve<=V;ve++)Object.assign(t[ve],{range:v.range,unelevated:!0,color:ae.value,textColor:oe.value});Object.assign(t[M],{rangeFrom:!0,flat:!1}),v.to!==void 0&&Object.assign(t[V],{rangeTo:!0,flat:!1})}else if(v.to!==void 0){const M=f+v.to-1;for(let V=f;V<=M;V++)Object.assign(t[V],{range:v.range,unelevated:!0,color:ae.value,textColor:oe.value});Object.assign(t[M],{flat:!1,rangeTo:!0})}else{const M=f+G.value-1;for(let V=f;V<=M;V++)Object.assign(t[V],{range:v.range,unelevated:!0,color:ae.value,textColor:oe.value})}}),me.value!==void 0){const v=f+me.value.from-1,M=f+me.value.to-1;for(let V=v;V<=M;V++)t[V].color=ae.value,t[V].editRange=!0;me.value.includeFrom===!0&&(t[v].editRangeFrom=!0),me.value.includeTo===!0&&(t[M].editRangeTo=!0)}y.value.year===H.value.year&&y.value.month===H.value.month&&(t[f+H.value.day-1].today=!0);const b=t.length%7;if(b>0){const v=7-b;for(let M=1;M<=v;M++)t.push({i:M,fill:!0})}return t.forEach(v=>{let M="q-date__calendar-item ";v.fill===!0?M+="q-date__calendar-item--fill":(M+=`q-date__calendar-item--${v.in===!0?"in":"out"}`,v.range!==void 0&&(M+=` q-date__range${v.rangeTo===!0?"-to":v.rangeFrom===!0?"-from":""}`),v.editRange===!0&&(M+=` q-date__edit-range${v.editRangeFrom===!0?"-from":""}${v.editRangeTo===!0?"-to":""}`),(v.range!==void 0||v.editRange===!0)&&(M+=` text-${v.color}`)),v.classes=M}),t}),Lt=D(()=>e.disable===!0?{"aria-disabled":"true"}:{});ce(()=>e.modelValue,t=>{if(p===JSON.stringify(t))p=0;else{const a=at(S.value,C.value);se(a.year,a.month,a)}}),ce(L,()=>{j.value!==null&&d.$el.contains(document.activeElement)===!0&&j.value.focus()}),ce(()=>y.value.year+"|"+y.value.month,()=>{s("navigation",{year:y.value.year,month:y.value.month})}),ce(Ve,t=>{st(t,C.value,"mask"),S.value=t}),ce(ze,t=>{st(S.value,t,"locale"),C.value=t});function Te(t){p=JSON.stringify(t)}function et(){const{year:t,month:a,day:n}=H.value,c={...y.value,year:t,month:a,day:n},f=De.value[ee(c)];(f===void 0||f.includes(c.day)===!1)&&Ne(c),Ie(c.year,c.month)}function Bt(t){Mt(t)===!0&&(L.value=t)}function Rt(t,a){["month","year"].includes(t)&&(t==="month"?nt:Fe)(a===!0?-1:1)}function Ie(t,a){L.value="Calendar",se(t,a)}function Pt(t,a){if(e.range===!1||!t){N.value=null;return}const n=Object.assign({...y.value},t),c=a!==void 0?Object.assign({...y.value},a):n;N.value={init:n,initHash:K(n),final:c,finalHash:K(c)},Ie(n.year,n.month)}function tt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,a,n){return ja(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function at(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return lt();const c=n[n.length-1],f=Ee(c.from!==void 0?c.from:c,t,a);return f.dateHash===null?lt():f}function lt(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=H.value!==void 0?H.value:m();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+Y(a)+"/01"}}function nt(t){let a=y.value.year,n=Number(y.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),se(a,n),_e.value===!0&&be("month")}function Fe(t){const a=Number(y.value.year)+t;se(a,y.value.month),_e.value===!0&&be("year")}function Ut(t){se(t,y.value.month),L.value=e.defaultView==="Years"?"Months":"Calendar",_e.value===!0&&be("year")}function Zt(t){se(y.value.year,t),L.value="Calendar",_e.value===!0&&be("month")}function zt(t,a){(De.value[a]?.includes(t.day)===!0?Qe:Ne)(t)}function le(t){return{year:t.year,month:t.month,day:t.day}}function se(t,a,n){if(T.value!==null&&t<=T.value.year&&((a<T.value.month||t<T.value.year)&&(a=T.value.month),t=T.value.year),I.value!==null&&t>=I.value.year&&((a>I.value.month||t>I.value.year)&&(a=I.value.month),t=I.value.year),n!==void 0){const{hour:f,minute:b,second:v,millisecond:M,timezoneOffset:V,timeHash:ve}=n;Object.assign(y.value,{hour:f,minute:b,second:v,millisecond:M,timezoneOffset:V,timeHash:ve})}const c=t+"/"+Y(a)+"/01";c!==y.value.dateHash&&(ge.value=y.value.dateHash<c==(o.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(qe.value=ge.value),ut(()=>{ye.value=t-t%X-(t<0?X:0),Object.assign(y.value,{year:t,month:a,day:1,dateHash:c})}))}function ot(t,a,n){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:f,details:b}=rt(a,n);Te(c),s("update:modelValue",c,f,b)}function be(t){const a=Z.value[0]!==void 0&&Z.value[0].dateHash!==null?{...Z.value[0]}:{...y.value};ut(()=>{a.year=y.value.year,a.month=y.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ce(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const c=ue(a),{details:f}=rt("",a);Te(c),s("update:modelValue",c,t,f)})}function rt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...le(a.target),from:le(a.from),to:le(a.to)}}:{reason:`${t}-day`,details:le(a)}}function ue(t,a,n){return t.from!==void 0?{from:Oe.value(t.from,a,n),to:Oe.value(t.to,a,n)}:Oe.value(t,a,n)}function Ne(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=K(t.from),c=K(t.to),f=Z.value.filter(v=>v.dateHash<n||v.dateHash>c),b=re.value.filter(({from:v,to:M})=>M.dateHash<n||v.dateHash>c);a=f.concat(b).concat(t).map(v=>ue(v))}else{const n=He.value.slice();n.push(ue(t)),a=n}else a=ue(t);ot(a,"add",t)}function Qe(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=ue(t);t.from!==void 0?a=e.modelValue.filter(c=>c.from!==void 0?c.from!==n.from&&c.to!==n.to:!0):a=e.modelValue.filter(c=>c!==n),a.length===0&&(a=null)}ot(a,"remove",t)}function st(t,a,n){const c=Z.value.concat(re.value).map(b=>ue(b,t,a)).filter(b=>b.from!==void 0?b.from.dateHash!==null&&b.to.dateHash!==null:b.dateHash!==null),f=(e.multiple===!0?c:c[0])||null;Te(f),s("update:modelValue",f,n)}function $t(){if(e.minimal!==!0)return _("div",{class:"q-date__header "+h.value},[_("div",{class:"relative-position"},[_(he,{name:"q-transition--fade"},()=>_("div",{key:"h-yr-"+Xe.value,class:"q-date__header-subtitle q-date__header-link "+(L.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...r("vY",{onClick(){L.value="Years"},onKeyup(t){t.keyCode===13&&(L.value="Years")}})},[Xe.value]))]),_("div",{class:"q-date__header-title relative-position flex no-wrap"},[_("div",{class:"relative-position col"},[_(he,{name:"q-transition--fade"},()=>_("div",{key:"h-sub"+Je.value,class:"q-date__header-title-label q-date__header-link "+(L.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...r("vC",{onClick(){L.value="Calendar"},onKeyup(t){t.keyCode===13&&(L.value="Calendar")}})},[Je.value]))]),e.todayBtn===!0?_(F,{class:"q-date__header-today self-start",icon:o.iconSet.datetime.today,ariaLabel:o.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:et}):null])])}function Ae({label:t,type:a,key:n,dir:c,goTo:f,boundaries:b,cls:v}){return[_("div",{class:"row items-center q-date__arrow"},[_(F,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[0],ariaLabel:a==="Years"?o.lang.date.prevYear:o.lang.date.prevMonth,tabindex:i.value,disable:b.prev===!1,...r("go-#"+a,{onClick(){f(-1)}})})]),_("div",{class:"relative-position overflow-hidden flex flex-center"+v},[_(he,{name:"q-transition--jump-"+c},()=>_("div",{key:n},[_(F,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...r("view#"+a,{onClick:()=>{L.value=a}})})]))]),_("div",{class:"row items-center q-date__arrow"},[_(F,{round:!0,dense:!0,size:"sm",flat:!0,icon:Me.value[1],ariaLabel:a==="Years"?o.lang.date.nextYear:o.lang.date.nextMonth,tabindex:i.value,disable:b.next===!1,...r("go+#"+a,{onClick(){f(1)}})})])]}const Jt={Calendar:()=>[_("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[_("div",{class:"q-date__navigation row items-center no-wrap"},Ae({label:C.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:ge.value,goTo:nt,boundaries:je.value.month,cls:" col"}).concat(Ae({label:y.value.year,type:"Years",key:y.value.year,dir:qe.value,goTo:Fe,boundaries:je.value.year,cls:""}))),_("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Et.value.map(t=>_("div",{class:"q-date__calendar-item"},[_("div",t)]))),_("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[_(he,{name:"q-transition--slide-"+ge.value},()=>_("div",{key:R.value,class:"q-date__calendar-days fit"},Ke.value.map(t=>_("div",{class:t.classes},[t.in===!0?_(F,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...r("day#"+t.i,{onClick:()=>{Xt(t.i)},onMouseover:()=>{Wt(t.i)}})},t.event!==!1?()=>_("div",{class:"q-date__event bg-"+t.event}):null):_("div",""+t.i)]))))])])],Months(){const t=y.value.year===H.value.year,a=c=>T.value!==null&&y.value.year===T.value.year&&T.value.month>c||I.value!==null&&y.value.year===I.value.year&&I.value.month<c,n=C.value.monthsShort.map((c,f)=>{const b=y.value.month===f+1;return _("div",{class:"q-date__months-item flex flex-center"},[_(F,{class:t===!0&&H.value.month===f+1?"q-date__today":null,flat:b!==!0,label:c,unelevated:b,color:b===!0?ae.value:null,textColor:b===!0?oe.value:null,tabindex:i.value,disable:a(f+1),...r("month#"+f,{onClick:()=>{Zt(f+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(_("div",{class:"row no-wrap full-width"},[Ae({label:y.value.year,type:"Years",key:y.value.year,dir:qe.value,goTo:Fe,boundaries:je.value.year,cls:" col"})])),_("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=ye.value,a=t+X,n=[],c=f=>T.value!==null&&T.value.year>f||I.value!==null&&I.value.year<f;for(let f=t;f<=a;f++){const b=y.value.year===f;n.push(_("div",{class:"q-date__years-item flex flex-center"},[_(F,{key:"yr"+f,class:H.value.year===f?"q-date__today":null,flat:!b,label:f,dense:!0,unelevated:b,color:b===!0?ae.value:null,textColor:b===!0?oe.value:null,tabindex:i.value,disable:c(f),...r("yr#"+f,{onClick:()=>{Ut(f)}})})]))}return _("div",{class:"q-date__view q-date__years flex flex-center"},[_("div",{class:"col-auto"},[_(F,{round:!0,dense:!0,flat:!0,icon:Me.value[0],ariaLabel:o.lang.date.prevRangeYears(X),tabindex:i.value,disable:c(t),...r("y-",{onClick:()=>{ye.value-=X}})})]),_("div",{class:"q-date__years-content col self-stretch row items-center"},n),_("div",{class:"col-auto"},[_(F,{round:!0,dense:!0,flat:!0,icon:Me.value[1],ariaLabel:o.lang.date.nextRangeYears(X),tabindex:i.value,disable:c(a),...r("y+",{onClick:()=>{ye.value+=X}})})])])}};function Xt(t){const a={...y.value,day:t};if(e.range===!1){zt(a,R.value);return}if(N.value===null){const n=Ke.value.find(f=>f.fill!==!0&&f.i===t);if(e.noUnset!==!0&&n.range!==void 0){Qe({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Qe(a);return}const c=K(a);N.value={init:a,initHash:c,final:a,finalHash:c},s("rangeStart",le(a))}else{const n=N.value.initHash,c=K(a),f=n<=c?{from:N.value.init,to:a}:{from:a,to:N.value.init};N.value=null,Ne(n===c?a:{target:a,...f}),s("rangeEnd",{from:le(f.from),to:le(f.to)})}}function Wt(t){if(N.value!==null){const a={...y.value,day:t};Object.assign(N.value,{final:a,finalHash:K(a)})}}return Object.assign(d,{setToday:et,setView:Bt,offsetCalendar:Rt,setCalendarTo:Ie,setEditingRange:Pt}),()=>{const t=[_("div",{class:"q-date__content col relative-position"},[_(he,{name:"q-transition--fade"},Jt[L.value])])],a=na(l.default);return a!==void 0&&t.push(_("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&O(t,"push"),_("div",{class:jt.value,...Lt.value},[$t(),_("div",{ref:j,class:"q-date__main col column",tabindex:-1},t)])}}}),bt=xt({name:"QPopupProxy",props:{...ha,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:s,attrs:d}){const{proxy:o}=Yt(),{$q:u}=o,r=U(!1),i=U(null),h=D(()=>parseInt(e.breakpoint,10)),{canShow:k}=ga({showing:r});function m(){return u.screen.width<h.value||u.screen.height<h.value?"dialog":"menu"}const p=U(m()),A=D(()=>p.value==="menu"?{maxHeight:"99vh"}:{});ce(()=>m(),S=>{r.value!==!0&&(p.value=S)});function O(S){r.value=!0,s("show",S)}function j(S){r.value=!1,p.value=m(),s("hide",S)}return Object.assign(o,{show(S){k(S)===!0&&i.value.show(S)},hide(S){i.value.hide(S)},toggle(S){i.value.toggle(S)}}),ra(o,"currentComponent",()=>({type:p.value,ref:i.value})),()=>{const S={ref:i,...A.value,...d,onShow:O,onHide:j};let C;return p.value==="dialog"?C=St:(C=ya,Object.assign(S,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(C,S,l.default)}}}),Ea={name:"AreaCrud",data(){return{loading:!1,rows:[],search:"",dlg:{show:!1,isEdit:!1,saving:!1},form:{id:null,area:"",curso1:null,curso2:null,curso3:null,curso4:null,curso5:null,curso6:null,titulo_fecha1:"",fecha1:"",titulo_fecha2:"",fecha2:"",lugar:"",modalidad:"",inscripcion:"",cupos_por_grado:null,reglas_especiales:null},coursesToggles:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},cupos:{1:null,2:null,3:null,4:null,5:null,6:null},reglasString:""}},computed:{rowsFiltered(){const e=(this.search||"").toLowerCase().trim();return e?this.rows.filter(l=>[l.area,l.lugar,l.modalidad,l.titulo_fecha1,l.titulo_fecha2].filter(Boolean).join(" ").toLowerCase().includes(e)):this.rows}},mounted(){this.fetchAreas()},methods:{async fetchAreas(){this.loading=!0;try{const{data:e}=await this.$axios.get("/areas");this.rows=e||[]}catch{this.$q.notify({type:"negative",message:"No se pudieron cargar las áreas"})}finally{this.loading=!1}},formatDate(e){if(!e)return"";try{const[l,s,d]=e.split("-").map(Number);return new Date(l,s-1,d).toLocaleDateString("es-BO",{year:"numeric",month:"long",day:"numeric"})}catch{return e}},coursesFromRow(e){const l={};for(let s=1;s<=6;s++){const d=e[`curso${s}`];d&&(l[`curso${s}`]=d)}return l},hasAnyCourse(e){for(let l=1;l<=6;l++)if(e[`curso${l}`])return!0;return!1},defaultCourseLabel(e){return`${e}º Secundaria`},openCreate(){this.dlg.isEdit=!1,this.dlg.show=!0,this.resetForm()},openEdit(e){this.dlg.isEdit=!0,this.dlg.show=!0,this.resetForm(),this.form={id:e.id,area:e.area||"",curso1:e.curso1||null,curso2:e.curso2||null,curso3:e.curso3||null,curso4:e.curso4||null,curso5:e.curso5||null,curso6:e.curso6||null,titulo_fecha1:e.titulo_fecha1||"",fecha1:e.fecha1||"",titulo_fecha2:e.titulo_fecha2||"",fecha2:e.fecha2||"",lugar:e.lugar||"",modalidad:e.modalidad||"",inscripcion:e.inscripcion||"",cupos_por_grado:e.cupos_por_grado||null,reglas_especiales:e.reglas_especiales||null};for(let s=1;s<=6;s++)this.coursesToggles[s]=!!this.form[`curso${s}`];const l=this.form.cupos_por_grado||{};for(let s=1;s<=6;s++)this.cupos[s]=l[String(s)]??null;this.reglasString=this.form.reglas_especiales?JSON.stringify(this.form.reglas_especiales,null,2):""},resetForm(){this.form={id:null,area:"",curso1:null,curso2:null,curso3:null,curso4:null,curso5:null,curso6:null,titulo_fecha1:"",fecha1:"",titulo_fecha2:"",fecha2:"",lugar:"",modalidad:"",inscripcion:"",cupos_por_grado:null,reglas_especiales:null},this.coursesToggles={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},this.cupos={1:null,2:null,3:null,4:null,5:null,6:null},this.reglasString=""},buildPayload(){for(let H=1;H<=6;H++)this.form[`curso${H}`]=this.coursesToggles[H]?this.defaultCourseLabel(H):null;const e={};for(let H=1;H<=6;H++){const y=this.cupos[H];y!==null&&y!==""&&!isNaN(y)&&(e[String(H)]=Number(y))}if(this.form.cupos_por_grado=Object.keys(e).length?e:null,(this.reglasString||"").trim()!=="")try{this.form.reglas_especiales=JSON.parse(this.reglasString)}catch{throw this.$q.notify({type:"warning",message:"El JSON de Reglas especiales no es válido."}),new Error("invalid_json")}else this.form.reglas_especiales=null;const{id:l,area:s,curso1:d,curso2:o,curso3:u,curso4:r,curso5:i,curso6:h,titulo_fecha1:k,fecha1:m,titulo_fecha2:p,fecha2:A,lugar:O,modalidad:j,inscripcion:S,cupos_por_grado:C,reglas_especiales:Ve}=this.form;return{id:l,payload:{area:s,curso1:d,curso2:o,curso3:u,curso4:r,curso5:i,curso6:h,titulo_fecha1:k,fecha1:m,titulo_fecha2:p,fecha2:A,lugar:O,modalidad:j,inscripcion:S,cupos_por_grado:C,reglas_especiales:Ve}}},async save(){if(!await this.$refs.formRef.validate())return;let l,s;try{({id:l,payload:s}=this.buildPayload())}catch{return}this.dlg.saving=!0;try{this.dlg.isEdit&&l?(await this.$axios.put(`/areas/${l}`,s),this.$q.notify({type:"positive",message:"Área actualizada"})):(await this.$axios.post("/areas",s),this.$q.notify({type:"positive",message:"Área creada"})),this.dlg.show=!1,await this.fetchAreas()}catch(d){const o=d?.response?.data?.message||"No se pudo guardar el área";this.$q.notify({type:"negative",message:o})}finally{this.dlg.saving=!1}},confirmDelete(e){this.$q.dialog({title:"Eliminar",message:`¿Eliminar el área "${e.area}"? Esta acción no se puede deshacer.`,cancel:!0,persistent:!0,ok:{label:"Eliminar",color:"negative"},cancelLabel:"Cancelar"}).onOk(async()=>{try{await this.$axios.delete(`/areas/${e.id}`),this.$q.notify({type:"positive",message:"Área eliminada"}),await this.fetchAreas()}catch(l){const s=l?.response?.data?.message||"No se pudo eliminar";this.$q.notify({type:"negative",message:s})}})}}},Fa={class:"col-12 col-md-4"},Na={class:"col-12 col-md-8 text-right"},Qa={class:"text-weight-medium"},Aa={key:0,class:"text-grey"},La={key:0},Ba={key:1},Ra={key:2,class:"text-grey"},Pa={key:0},Ua={key:1},Za={key:2,class:"text-grey"},za={class:"text-right"},$a={class:"text-h6"},Ja={class:"row q-col-gutter-md"},Xa={class:"col-12 col-md-6"},Wa={class:"col-12 col-md-3"},Ga={class:"col-12 col-md-3"},Ka={class:"col-12 col-md-3"},el={class:"col-12 col-md-3"},tl={class:"col-12 col-md-6"},al={class:"col-12 col-md-6"},ll={class:"col-12"},nl={class:"col-12"},ol={class:"row q-col-gutter-sm"},rl={class:"col-12"},sl={class:"row q-col-gutter-sm"},ul={class:"col-12"},il={class:"row q-mt-md q-gutter-sm"};function dl(e,l,s,d,o,u){return Q(),it(pa,{class:"q-pa-md bg-grey-3"},{default:x(()=>[g(dt,{flat:"",bordered:"",class:"bg-white"},{default:x(()=>[g(we,{class:"row items-center q-col-gutter-md"},{default:x(()=>[w("div",Fa,[g(z,{modelValue:o.search,"onUpdate:modelValue":l[0]||(l[0]=r=>o.search=r),filled:"",dense:"",label:"Buscar área...",clearable:""},{prepend:x(()=>[g(E,{name:"search"})]),_:1},8,["modelValue"])]),w("div",Na,[g(F,{color:"primary",icon:"add",label:"Nueva Área",unelevated:"",onClick:u.openCreate},null,8,["onClick"])])]),_:1}),g(ct),g(we,null,{default:x(()=>[g(ca,{dense:"","wrap-cells":""},{default:x(()=>[l[15]||(l[15]=w("thead",null,[w("tr",{class:"bg-primary text-white"},[w("th",null,"Área"),w("th",null,"Cursos"),w("th",null,"Fechas"),w("th",null,"Lugar / Modalidad"),w("th",null,"Acciones")])],-1)),w("tbody",null,[(Q(!0),P(xe,null,Ye(u.rowsFiltered,r=>(Q(),P("tr",{key:r.id},[w("td",Qa,$(r.area),1),w("td",null,[(Q(!0),P(xe,null,Ye(u.coursesFromRow(r),(i,h)=>(Q(),it(da,{key:h,color:"primary","text-color":"white",dense:"",square:"",class:"q-mr-xs q-mb-xs"},{default:x(()=>[J($(i),1)]),_:2},1024))),128)),u.hasAnyCourse(r)?ne("",!0):(Q(),P("span",Aa,"—"))]),w("td",null,[r.fecha1||r.titulo_fecha1?(Q(),P("div",La,[g(E,{name:"event",class:"q-mr-xs"}),J(" "+$(r.titulo_fecha1||"Fecha 1")+": ",1),w("b",null,$(u.formatDate(r.fecha1)),1)])):ne("",!0),r.fecha2||r.titulo_fecha2?(Q(),P("div",Ba,[g(E,{name:"event",class:"q-mr-xs"}),J(" "+$(r.titulo_fecha2||"Fecha 2")+": ",1),w("b",null,$(u.formatDate(r.fecha2)),1)])):ne("",!0),!r.fecha1&&!r.fecha2?(Q(),P("span",Ra,"—")):ne("",!0)]),w("td",null,[r.lugar?(Q(),P("div",Pa,[g(E,{name:"place",class:"q-mr-xs"}),J(" "+$(r.lugar),1)])):ne("",!0),r.modalidad?(Q(),P("div",Ua,[g(E,{name:"meeting_room",class:"q-mr-xs"}),J(" "+$(r.modalidad),1)])):ne("",!0),!r.lugar&&!r.modalidad?(Q(),P("span",Za,"—")):ne("",!0)]),w("td",za,[g(F,{dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:i=>u.openEdit(r)},{default:x(()=>[g(mt,null,{default:x(()=>l[13]||(l[13]=[J("Editar")])),_:1,__:[13]})]),_:2},1032,["onClick"]),g(F,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:i=>u.confirmDelete(r)},{default:x(()=>[g(mt,null,{default:x(()=>l[14]||(l[14]=[J("Eliminar")])),_:1,__:[14]})]),_:2},1032,["onClick"])])]))),128))])]),_:1,__:[15]})]),_:1}),g(fa,{showing:o.loading},{default:x(()=>[g(ma,{size:"40px"})]),_:1},8,["showing"])]),_:1}),g(St,{modelValue:o.dlg.show,"onUpdate:modelValue":l[12]||(l[12]=r=>o.dlg.show=r),persistent:""},{default:x(()=>[g(dt,{style:{"max-width":"980px",width:"100%"}},{default:x(()=>[g(we,{class:"row items-center"},{default:x(()=>[g(E,{name:o.dlg.isEdit?"edit":"add",class:"q-mr-sm text-primary"},null,8,["name"]),w("div",$a,$(o.dlg.isEdit?"Editar área":"Nueva área"),1),g(va),ft(g(F,{icon:"close",flat:"",round:"",dense:"",disable:o.dlg.saving},null,8,["disable"]),[[ht]])]),_:1}),g(ct),g(we,null,{default:x(()=>[g(_a,{ref:"formRef",onSubmit:ua(u.save,["prevent"])},{default:x(()=>[w("div",Ja,[w("div",Xa,[g(z,{modelValue:o.form.area,"onUpdate:modelValue":l[1]||(l[1]=r=>o.form.area=r),filled:"",dense:"",label:"Nombre del área",rules:[r=>!!r||"Obligatorio"]},{prepend:x(()=>[g(E,{name:"school"})]),_:1},8,["modelValue","rules"])]),w("div",Wa,[g(z,{modelValue:o.form.titulo_fecha1,"onUpdate:modelValue":l[2]||(l[2]=r=>o.form.titulo_fecha1=r),filled:"",dense:"",label:"Título Fecha 1"},{prepend:x(()=>[g(E,{name:"title"})]),_:1},8,["modelValue"])]),w("div",Ga,[g(z,{modelValue:o.form.fecha1,"onUpdate:modelValue":l[4]||(l[4]=r=>o.form.fecha1=r),filled:"",dense:"",label:"Fecha 1 (YYYY-MM-DD)",mask:"####-##-##"},{append:x(()=>[g(E,{name:"event",class:"cursor-pointer"},{default:x(()=>[g(bt,{"transition-show":"scale","transition-hide":"scale"},{default:x(()=>[g(Dt,{modelValue:o.form.fecha1,"onUpdate:modelValue":l[3]||(l[3]=r=>o.form.fecha1=r),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),w("div",Ka,[g(z,{modelValue:o.form.titulo_fecha2,"onUpdate:modelValue":l[5]||(l[5]=r=>o.form.titulo_fecha2=r),filled:"",dense:"",label:"Título Fecha 2"},{prepend:x(()=>[g(E,{name:"title"})]),_:1},8,["modelValue"])]),w("div",el,[g(z,{modelValue:o.form.fecha2,"onUpdate:modelValue":l[7]||(l[7]=r=>o.form.fecha2=r),filled:"",dense:"",label:"Fecha 2 (YYYY-MM-DD)",mask:"####-##-##"},{append:x(()=>[g(E,{name:"event",class:"cursor-pointer"},{default:x(()=>[g(bt,{"transition-show":"scale","transition-hide":"scale"},{default:x(()=>[g(Dt,{modelValue:o.form.fecha2,"onUpdate:modelValue":l[6]||(l[6]=r=>o.form.fecha2=r),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),w("div",tl,[g(z,{modelValue:o.form.lugar,"onUpdate:modelValue":l[8]||(l[8]=r=>o.form.lugar=r),filled:"",dense:"",label:"Lugar"},{prepend:x(()=>[g(E,{name:"place"})]),_:1},8,["modelValue"])]),w("div",al,[g(z,{modelValue:o.form.modalidad,"onUpdate:modelValue":l[9]||(l[9]=r=>o.form.modalidad=r),filled:"",dense:"",label:"Modalidad (Presencial/Virtual)"},{prepend:x(()=>[g(E,{name:"meeting_room"})]),_:1},8,["modelValue"])]),w("div",ll,[g(z,{modelValue:o.form.inscripcion,"onUpdate:modelValue":l[10]||(l[10]=r=>o.form.inscripcion=r),type:"textarea",filled:"",autogrow:"",label:"Notas/Información de inscripción"},null,8,["modelValue"])]),w("div",nl,[g(vt,{class:"bg-grey-1 q-mb-sm"},{avatar:x(()=>[g(E,{name:"class",color:"primary"})]),default:x(()=>[l[16]||(l[16]=J(" Selecciona los cursos habilitados (si está activado se guarda su rótulo). "))]),_:1,__:[16]}),w("div",ol,[(Q(),P(xe,null,Ye(6,r=>w("div",{key:r,class:"col-6 col-md-2"},[g(ia,{modelValue:o.coursesToggles[r],"onUpdate:modelValue":i=>o.coursesToggles[r]=i,label:u.defaultCourseLabel(r)},null,8,["modelValue","onUpdate:modelValue","label"])])),64))])]),w("div",rl,[g(vt,{class:"bg-grey-1 q-mb-sm"},{avatar:x(()=>[g(E,{name:"format_list_numbered",color:"primary"})]),default:x(()=>[l[17]||(l[17]=J(" Cupos por grado (opcional). "))]),_:1,__:[17]}),w("div",sl,[(Q(),P(xe,null,Ye(6,r=>w("div",{key:"cupo"+r,class:"col-6 col-md-2"},[g(z,{modelValue:o.cupos[r],"onUpdate:modelValue":i=>o.cupos[r]=i,modelModifiers:{number:!0},type:"number",min:"0",filled:"",dense:"",label:`Cupo ${r}º`},null,8,["modelValue","onUpdate:modelValue","label"])])),64))])]),w("div",ul,[g(z,{modelValue:o.reglasString,"onUpdate:modelValue":l[11]||(l[11]=r=>o.reglasString=r),type:"textarea",filled:"",autogrow:"",label:"Reglas especiales (JSON, opcional)",hint:'Ej: {"quimica_experimental":{"grupo_min":3,"grupo_max":4}}'},null,8,["modelValue"])])]),w("div",il,[g(F,{loading:o.dlg.saving,type:"submit",color:"primary",label:o.dlg.isEdit?"Guardar":"Crear"},null,8,["loading","label"]),ft(g(F,{flat:"",color:"grey-7",label:"Cancelar",disable:o.dlg.saving},null,8,["disable"]),[[ht]])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const bl=sa(Ea,[["render",dl]]);export{bl as default};
