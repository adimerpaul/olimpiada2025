import{j as at,ab as Je,R as da,ak as ca,S as ma,g as nt,r as R,k as p,al as fa,T as va,am as ha,X as ga,an as ya,I as ce,M as gt,q as yt,y as _t,ao as _a,l as _,ap as Ye,m as Ft,E as pa,aq as Qt,ar as ba,F as Ma,as as Da,G as wa,at as xa,au as Sa,$ as pt,av as Ya,f as L,aw as Ca,h as Pt,_ as ka,c as $e,o as j,w as x,a as h,Q as bt,e as Ee,b as M,af as z,d as F,a6 as Mt,ag as B,ah as je,ai as Ie,t as K,a7 as te,a4 as X,n as Dt,aj as qa,ax as wt}from"./index-DjedoNJp.js";import{Q as xt}from"./QChip-C0nkFCr8.js";import{Q as Va}from"./QBadge-Dfv_XUmI.js";import{v as Ha,a as St,u as Oa,p as Yt,d as Ta,e as At,f as Ea,r as Ct,s as ja,c as kt,g as k,h as Ia,Q as Na}from"./format-C8w485Ck.js";import{Q as Fa}from"./QMarkupTable-CTS_xb0T.js";import{Q as Qa,a as Pa}from"./QInnerLoading-DaxcO_gM.js";import{Q as Aa}from"./QSpace-DMjnhttB.js";import{Q as We}from"./QBanner-RyH8TlbD.js";import{Q as La}from"./QForm-C-u9RR-8.js";import{Q as Ba}from"./QPage-BGWxAykp.js";import{C as qt}from"./ClosePopup-FZSzb90a.js";const Vt=at({name:"QTooltip",inheritAttrs:!1,props:{...Oa,...ma,...Je,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Je.transitionShow,default:"jump-down"},transitionHide:{...Je.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:St},self:{type:String,default:"top middle",validator:St},offset:{type:Array,default:()=>[14,14],validator:Ha},scrollTarget:ca,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...da],setup(e,{slots:a,emit:s,attrs:d}){let l,i;const r=nt(),{proxy:{$q:u}}=r,f=R(null),Y=R(!1),v=p(()=>Yt(e.anchor,u.lang.rtl)),b=p(()=>Yt(e.self,u.lang.rtl)),Q=p(()=>e.persistent!==!0),{registerTick:O,removeTick:T}=fa(),{registerTimeout:S}=va(),{transitionProps:C,transitionStyle:Ce}=ha(e),{localScrollTarget:_e,changeScrollEvent:U,unconfigureScrollTarget:y}=Ta(e,Me),{anchorEl:q,canShow:pe,anchorEvents:G}=At({showing:Y,configureAnchorEl:be}),{show:I,hide:$}=ga({showing:Y,canShow:pe,handleShow:ae,handleHide:re,hideOnRouteChange:Q,processOnMount:!0});Object.assign(G,{delayShow:Z,delayHide:se});const{showPortal:fe,hidePortal:E,renderPortal:Qe}=ya(r,f,He,"tooltip");if(u.platform.is.mobile===!0){const N={anchorEl:q,innerRef:f,onClickOutside(ee){return $(ee),ee.target.classList.contains("q-dialog__backdrop")&&pa(ee),!0}},ke=p(()=>e.modelValue===null&&e.persistent!==!0&&Y.value===!0);ce(ke,ee=>{(ee===!0?Ea:Ct)(N)}),gt(()=>{Ct(N)})}function ae(N){fe(),O(()=>{i=new MutationObserver(()=>ne()),i.observe(f.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ne(),Me()}),l===void 0&&(l=ce(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,ne)),S(()=>{fe(!0),s("show",N)},e.transitionDuration)}function re(N){T(),E(),ve(),S(()=>{E(!0),s("hide",N)},e.transitionDuration)}function ve(){i!==void 0&&(i.disconnect(),i=void 0),l!==void 0&&(l(),l=void 0),y(),yt(G,"tooltipTemp")}function ne(){ja({targetEl:f.value,offset:e.offset,anchorEl:q.value,anchorOrigin:v.value,selfOrigin:b.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Z(N){if(u.platform.is.mobile===!0){kt(),document.body.classList.add("non-selectable");const ke=q.value,ee=["touchmove","touchcancel","touchend","click"].map(ge=>[ke,ge,"delayHide","passiveCapture"]);_t(G,"tooltipTemp",ee)}S(()=>{I(N)},e.delay)}function se(N){u.platform.is.mobile===!0&&(yt(G,"tooltipTemp"),kt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),S(()=>{$(N)},e.hideDelay)}function be(){if(e.noParentEvent===!0||q.value===null)return;const N=u.platform.is.mobile===!0?[[q.value,"touchstart","delayShow","passive"]]:[[q.value,"mouseenter","delayShow","passive"],[q.value,"mouseleave","delayHide","passive"]];_t(G,"anchor",N)}function Me(){if(q.value!==null||e.scrollTarget!==void 0){_e.value=_a(q.value,e.scrollTarget);const N=e.noParentEvent===!0?ne:$;U(_e.value,N)}}function he(){return Y.value===!0?_("div",{...d,ref:f,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",d.class],style:[d.style,Ce.value],role:"tooltip"},Ft(a.default)):null}function He(){return _(Ye,C.value,he)}return gt(ve),Object.assign(r.proxy,{updatePosition:ne}),Qe}});function Ra(){let e=Object.create(null);return{getCache:(a,s)=>e[a]===void 0?e[a]=typeof s=="function"?s():s:e[a],setCache(a,s){e[a]=s},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const me=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ua(e,a,s){return Object.prototype.toString.call(e)==="[object Date]"&&(s=e.getDate(),a=e.getMonth()+1,e=e.getFullYear()),$a(lt(e,a,s))}function Ht(e,a,s){return Bt(Ja(e,a,s))}function Za(e){return za(e)===0}function Fe(e,a){return a<=6?31:a<=11||Za(e)?30:29}function za(e){const a=me.length;let s=me[0],d,l,i,r,u;if(e<s||e>=me[a-1])throw new Error("Invalid Jalaali year "+e);for(u=1;u<a&&(d=me[u],l=d-s,!(e<d));u+=1)s=d;return r=e-s,l-r<6&&(r=r-l+H(l+4,33)*33),i=J(J(r+1,33)-1,4),i===-1&&(i=4),i}function Lt(e,a){const s=me.length,d=e+621;let l=-14,i=me[0],r,u,f,Y,v;if(e<i||e>=me[s-1])throw new Error("Invalid Jalaali year "+e);for(v=1;v<s&&(r=me[v],u=r-i,!(e<r));v+=1)l=l+H(u,33)*8+H(J(u,33),4),i=r;Y=e-i,l=l+H(Y,33)*8+H(J(Y,33)+3,4),J(u,33)===4&&u-Y===4&&(l+=1);const b=H(d,4)-H((H(d,100)+1)*3,4)-150,Q=20+l-b;return a||(u-Y<6&&(Y=Y-u+H(u+4,33)*33),f=J(J(Y+1,33)-1,4),f===-1&&(f=4)),{leap:f,gy:d,march:Q}}function Ja(e,a,s){const d=Lt(e,!0);return lt(d.gy,3,d.march)+(a-1)*31-H(a,7)*(a-7)+s-1}function $a(e){const a=Bt(e).gy;let s=a-621,d,l,i;const r=Lt(s,!1),u=lt(a,3,r.march);if(i=e-u,i>=0){if(i<=185)return l=1+H(i,31),d=J(i,31)+1,{jy:s,jm:l,jd:d};i-=186}else s-=1,i+=179,r.leap===1&&(i+=1);return l=7+H(i,30),d=J(i,30)+1,{jy:s,jm:l,jd:d}}function lt(e,a,s){let d=H((e+H(a-8,6)+100100)*1461,4)+H(153*J(a+9,12)+2,5)+s-34840408;return d=d-H(H(e+100100+H(a-8,6),100)*3,4)+752,d}function Bt(e){let a=4*e+139361631;a=a+H(H(4*e+183187720,146097)*3,4)*4-3908;const s=H(J(a,1461),4)*5+308,d=H(J(s,153),5)+1,l=J(H(s,153),12)+1;return{gy:H(a,1461)-100100+H(8-l,6),gm:l,gd:d}}function H(e,a){return~~(e/a)}function J(e,a){return e-~~(e/a)*a}const Wa=["gregorian","persian"],Ot={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Wa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Xa=["update:modelValue"];function ue(e){return e.year+"/"+k(e.month)+"/"+k(e.day)}function Ga(e,a){const s=p(()=>e.disable!==!0&&e.readonly!==!0),d=p(()=>s.value===!0?0:-1),l=p(()=>{const u=[];return e.color!==void 0&&u.push(`bg-${e.color}`),e.textColor!==void 0&&u.push(`text-${e.textColor}`),u.join(" ")});function i(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function r(u){const f=new Date,Y=u===!0?null:0;if(e.calendar==="persian"){const v=Ua(f);return{year:v.jy,month:v.jm,day:v.jd}}return{year:f.getFullYear(),month:f.getMonth()+1,day:f.getDate(),hour:Y,minute:Y,second:Y,millisecond:Y}}return{editable:s,tabindex:d,headerClass:l,getLocale:i,getCurrentDate:r}}const Rt=864e5,Ka=36e5,tt=6e4,Ut="YYYY-MM-DDTHH:mm:ss.SSSZ",en=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,tn=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Xe={};function an(e,a){const s="("+a.days.join("|")+")",d=e+s;if(Xe[d]!==void 0)return Xe[d];const l="("+a.daysShort.join("|")+")",i="("+a.months.join("|")+")",r="("+a.monthsShort.join("|")+")",u={};let f=0;const Y=e.replace(tn,b=>{switch(f++,b){case"YY":return u.YY=f,"(-?\\d{1,2})";case"YYYY":return u.YYYY=f,"(-?\\d{1,4})";case"M":return u.M=f,"(\\d{1,2})";case"Mo":return u.M=f++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return u.M=f,"(\\d{2})";case"MMM":return u.MMM=f,r;case"MMMM":return u.MMMM=f,i;case"D":return u.D=f,"(\\d{1,2})";case"Do":return u.D=f++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return u.D=f,"(\\d{2})";case"H":return u.H=f,"(\\d{1,2})";case"HH":return u.H=f,"(\\d{2})";case"h":return u.h=f,"(\\d{1,2})";case"hh":return u.h=f,"(\\d{2})";case"m":return u.m=f,"(\\d{1,2})";case"mm":return u.m=f,"(\\d{2})";case"s":return u.s=f,"(\\d{1,2})";case"ss":return u.s=f,"(\\d{2})";case"S":return u.S=f,"(\\d{1})";case"SS":return u.S=f,"(\\d{2})";case"SSS":return u.S=f,"(\\d{3})";case"A":return u.A=f,"(AM|PM)";case"a":return u.a=f,"(am|pm)";case"aa":return u.aa=f,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"do":return f++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return f++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return f++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return u.Z=f,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return u.ZZ=f,"(Z|[+-]\\d{2}\\d{2})";case"X":return u.X=f,"(-?\\d+)";case"x":return u.x=f,"(-?\\d{4,})";default:return f--,b[0]==="["&&(b=b.substring(1,b.length-1)),b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),v={map:u,regex:new RegExp("^"+Y)};return Xe[d]=v,v}function Zt(e,a){return e!==void 0?e:a!==void 0?a.date:ba.date}function Tt(e,a=""){const s=e>0?"-":"+",d=Math.abs(e),l=Math.floor(d/60),i=d%60;return s+k(l)+a+k(i)}function nn(e,a,s,d,l){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(l!==void 0&&Object.assign(i,l),e==null||e===""||typeof e!="string")return i;a===void 0&&(a=Ut);const r=Zt(s,Qt.props),u=r.months,f=r.monthsShort,{regex:Y,map:v}=an(a,r),b=e.match(Y);if(b===null)return i;let Q="";if(v.X!==void 0||v.x!==void 0){const O=parseInt(b[v.X!==void 0?v.X:v.x],10);if(isNaN(O)===!0||O<0)return i;const T=new Date(O*(v.X!==void 0?1e3:1));i.year=T.getFullYear(),i.month=T.getMonth()+1,i.day=T.getDate(),i.hour=T.getHours(),i.minute=T.getMinutes(),i.second=T.getSeconds(),i.millisecond=T.getMilliseconds()}else{if(v.YYYY!==void 0)i.year=parseInt(b[v.YYYY],10);else if(v.YY!==void 0){const O=parseInt(b[v.YY],10);i.year=O<0?O:2e3+O}if(v.M!==void 0){if(i.month=parseInt(b[v.M],10),i.month<1||i.month>12)return i}else v.MMM!==void 0?i.month=f.indexOf(b[v.MMM])+1:v.MMMM!==void 0&&(i.month=u.indexOf(b[v.MMMM])+1);if(v.D!==void 0){if(i.day=parseInt(b[v.D],10),i.year===null||i.month===null||i.day<1)return i;const O=d!=="persian"?new Date(i.year,i.month,0).getDate():Fe(i.year,i.month);if(i.day>O)return i}v.H!==void 0?i.hour=parseInt(b[v.H],10)%24:v.h!==void 0&&(i.hour=parseInt(b[v.h],10)%12,(v.A&&b[v.A]==="PM"||v.a&&b[v.a]==="pm"||v.aa&&b[v.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),v.m!==void 0&&(i.minute=parseInt(b[v.m],10)%60),v.s!==void 0&&(i.second=parseInt(b[v.s],10)%60),v.S!==void 0&&(i.millisecond=parseInt(b[v.S],10)*10**(3-b[v.S].length)),(v.Z!==void 0||v.ZZ!==void 0)&&(Q=v.Z!==void 0?b[v.Z].replace(":",""):b[v.ZZ],i.timezoneOffset=(Q[0]==="+"?-1:1)*(60*Q.slice(1,3)+1*Q.slice(3,5)))}return i.dateHash=k(i.year,6)+"/"+k(i.month)+"/"+k(i.day),i.timeHash=k(i.hour)+":"+k(i.minute)+":"+k(i.second)+Q,i}function Ge(e){const a=new Date(e.getFullYear(),e.getMonth(),e.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);const s=new Date(a.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const d=a.getTimezoneOffset()-s.getTimezoneOffset();a.setHours(a.getHours()-d);const l=(a-s)/(Rt*7);return 1+Math.floor(l)}function oe(e,a,s){const d=new Date(e),l=`set${s===!0?"UTC":""}`;switch(a){case"year":case"years":d[`${l}Month`](0);case"month":case"months":d[`${l}Date`](1);case"day":case"days":case"date":d[`${l}Hours`](0);case"hour":case"hours":d[`${l}Minutes`](0);case"minute":case"minutes":d[`${l}Seconds`](0);case"second":case"seconds":d[`${l}Milliseconds`](0)}return d}function Ne(e,a,s){return(e.getTime()-e.getTimezoneOffset()*tt-(a.getTime()-a.getTimezoneOffset()*tt))/s}function zt(e,a,s="days"){const d=new Date(e),l=new Date(a);switch(s){case"years":case"year":return d.getFullYear()-l.getFullYear();case"months":case"month":return(d.getFullYear()-l.getFullYear())*12+d.getMonth()-l.getMonth();case"days":case"day":case"date":return Ne(oe(d,"day"),oe(l,"day"),Rt);case"hours":case"hour":return Ne(oe(d,"hour"),oe(l,"hour"),Ka);case"minutes":case"minute":return Ne(oe(d,"minute"),oe(l,"minute"),tt);case"seconds":case"second":return Ne(oe(d,"second"),oe(l,"second"),1e3)}}function Ke(e){return zt(e,oe(e,"year"),"days")+1}function xe(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Et={YY(e,a,s){const d=this.YYYY(e,a,s)%100;return d>=0?k(d):"-"+k(Math.abs(d))},YYYY(e,a,s){return s??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return xe(e.getMonth()+1)},MM(e){return k(e.getMonth()+1)},MMM(e,a){return a.monthsShort[e.getMonth()]},MMMM(e,a){return a.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return xe(this.Q(e))},D(e){return e.getDate()},Do(e){return xe(e.getDate())},DD(e){return k(e.getDate())},DDD(e){return Ke(e)},DDDo(e){return xe(Ke(e))},DDDD(e){return k(Ke(e),3)},d(e){return e.getDay()},do(e){return xe(e.getDay())},dd(e,a){return a.days[e.getDay()].slice(0,2)},ddd(e,a){return a.daysShort[e.getDay()]},dddd(e,a){return a.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ge(e)},wo(e){return xe(Ge(e))},ww(e){return k(Ge(e))},H(e){return e.getHours()},HH(e){return k(e.getHours())},h(e){const a=e.getHours();return a===0?12:a>12?a%12:a},hh(e){return k(this.h(e))},m(e){return e.getMinutes()},mm(e){return k(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return k(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return k(Math.floor(e.getMilliseconds()/10))},SSS(e){return k(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,a,s,d){const l=d??e.getTimezoneOffset();return Tt(l,":")},ZZ(e,a,s,d){const l=d??e.getTimezoneOffset();return Tt(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ln(e,a,s,d,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;a===void 0&&(a=Ut);const r=Zt(s,Qt.props);return a.replace(en,(u,f)=>u in Et?Et[u](i,r,d,l):f===void 0?u:f.split("\\]").join("]"))}const le=20,on=["Calendar","Years","Months"],jt=e=>on.includes(e),et=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Se=" — ";function de(e){return e.year+"/"+k(e.month)}const It=at({name:"QDate",props:{...Ot,...Da,...Ma,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Ot.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:et},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:et},navigationMaxYearMonth:{type:String,validator:et},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:jt}},emits:[...Xa,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:s}){const{proxy:d}=nt(),{$q:l}=d,i=wa(e,l),{getCache:r}=Ra(),{tabindex:u,headerClass:f,getLocale:Y,getCurrentDate:v}=Ga(e,l);let b;const Q=xa(e),O=Ya(Q),T=R(null),S=R(ut()),C=R(Y()),Ce=p(()=>ut()),_e=p(()=>Y()),U=p(()=>v()),y=R(dt(S.value,C.value)),q=R(e.defaultView),pe=p(()=>l.lang.rtl===!0?"right":"left"),G=R(pe.value),I=R(pe.value),$=y.value.year,fe=R($-$%le-($<0?le:0)),E=R(null),Qe=p(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(i.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ae=p(()=>e.color||"primary"),re=p(()=>e.textColor||"white"),ve=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ne=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Z=p(()=>ne.value.filter(t=>typeof t=="string").map(t=>Be(t,S.value,C.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),se=p(()=>{const t=n=>Be(n,S.value,C.value);return ne.value.filter(n=>Sa(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),be=p(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=Ht(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Me=p(()=>e.calendar==="persian"?ue:(t,n,o)=>ln(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?S.value:n,o===void 0?C.value:o,t.year,t.timezoneOffset)),he=p(()=>Z.value.length+se.value.reduce((t,n)=>t+1+zt(be.value(n.to),be.value(n.from)),0)),He=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(E.value!==null){const o=E.value.init,c=be.value(o);return C.value.daysShort[c.getDay()]+", "+C.value.monthsShort[o.month-1]+" "+o.day+Se+"?"}if(he.value===0)return Se;if(he.value>1)return`${he.value} ${C.value.pluralDay}`;const t=Z.value[0],n=be.value(t);return isNaN(n.valueOf())===!0?Se:C.value.headerTitle!==void 0?C.value.headerTitle(n,t):C.value.daysShort[n.getDay()]+", "+C.value.monthsShort[t.month-1]+" "+t.day}),N=p(()=>Z.value.concat(se.value.map(n=>n.from)).sort((n,o)=>n.year-o.year||n.month-o.month)[0]),ke=p(()=>Z.value.concat(se.value.map(n=>n.to)).sort((n,o)=>o.year-n.year||o.month-n.month)[0]),ee=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(he.value===0)return Se;if(he.value>1){const t=N.value,n=ke.value,o=C.value.monthsShort;return o[t.month-1]+(t.year!==n.year?" "+t.year+Se+o[n.month-1]+" ":t.month!==n.month?Se+o[n.month-1]:"")+" "+n.year}return Z.value[0].year}),ge=p(()=>{const t=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return l.lang.rtl===!0?t.reverse():t}),ot=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):C.value.firstDayOfWeek),Jt=p(()=>{const t=C.value.daysShort,n=ot.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),ie=p(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Fe(t.year,t.month)}),$t=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),P=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),A=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Pe=p(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return P.value!==null&&P.value.year>=y.value.year&&(t.year.prev=!1,P.value.year===y.value.year&&P.value.month>=y.value.month&&(t.month.prev=!1)),A.value!==null&&A.value.year<=y.value.year&&(t.year.next=!1,A.value.year===y.value.year&&A.value.month<=y.value.month&&(t.month.next=!1)),t}),Oe=p(()=>{const t={};return Z.value.forEach(n=>{const o=de(n);t[o]===void 0&&(t[o]=[]),t[o].push(n.day)}),t}),rt=p(()=>{const t={};return se.value.forEach(n=>{const o=de(n.from),c=de(n.to);if(t[o]===void 0&&(t[o]=[]),t[o].push({from:n.from.day,to:o===c?n.to.day:void 0,range:n}),o<c){let m;const{year:w,month:g}=n.from,D=g<12?{year:w,month:g+1}:{year:w+1,month:1};for(;(m=de(D))<=c;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===c?n.to.day:void 0,range:n}),D.month++,D.month>12&&(D.year++,D.month=1)}}),t}),qe=p(()=>{if(E.value===null)return;const{init:t,initHash:n,final:o,finalHash:c}=E.value,[m,w]=n<=c?[t,o]:[o,t],g=de(m),D=de(w);if(g!==W.value&&D!==W.value)return;const V={};return g===W.value?(V.from=m.day,V.includeFrom=!0):V.from=1,D===W.value?(V.to=w.day,V.includeTo=!0):V.to=ie.value,V}),W=p(()=>de(y.value)),Wt=p(()=>{const t={};if(e.options===void 0){for(let o=1;o<=ie.value;o++)t[o]=!0;return t}const n=typeof e.options=="function"?e.options:o=>e.options.includes(o);for(let o=1;o<=ie.value;o++){const c=W.value+"/"+k(o);t[o]=n(c)}return t}),Xt=p(()=>{const t={};if(e.events===void 0)for(let n=1;n<=ie.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:o=>e.events.includes(o);for(let o=1;o<=ie.value;o++){const c=W.value+"/"+k(o);t[o]=n(c)===!0&&$t.value(c)}}return t}),Gt=p(()=>{let t,n;const{year:o,month:c}=y.value;if(e.calendar!=="persian")t=new Date(o,c-1,1),n=new Date(o,c-1,0).getDate();else{const m=Ht(o,c,1);t=new Date(m.gy,m.gm-1,m.gd);let w=c-1,g=o;w===0&&(w=12,g--),n=Fe(g,w)}return{days:t.getDay()-ot.value-1,endDay:n}}),st=p(()=>{const t=[],{days:n,endDay:o}=Gt.value,c=n<0?n+7:n;if(c<6)for(let g=o-c;g<=o;g++)t.push({i:g,fill:!0});const m=t.length;for(let g=1;g<=ie.value;g++){const D={i:g,event:Xt.value[g],classes:[]};Wt.value[g]===!0&&(D.in=!0,D.flat=!0),t.push(D)}if(Oe.value[W.value]!==void 0&&Oe.value[W.value].forEach(g=>{const D=m+g-1;Object.assign(t[D],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:re.value})}),rt.value[W.value]!==void 0&&rt.value[W.value].forEach(g=>{if(g.from!==void 0){const D=m+g.from-1,V=m+(g.to||ie.value)-1;for(let Ve=D;Ve<=V;Ve++)Object.assign(t[Ve],{range:g.range,unelevated:!0,color:ae.value,textColor:re.value});Object.assign(t[D],{rangeFrom:!0,flat:!1}),g.to!==void 0&&Object.assign(t[V],{rangeTo:!0,flat:!1})}else if(g.to!==void 0){const D=m+g.to-1;for(let V=m;V<=D;V++)Object.assign(t[V],{range:g.range,unelevated:!0,color:ae.value,textColor:re.value});Object.assign(t[D],{flat:!1,rangeTo:!0})}else{const D=m+ie.value-1;for(let V=m;V<=D;V++)Object.assign(t[V],{range:g.range,unelevated:!0,color:ae.value,textColor:re.value})}}),qe.value!==void 0){const g=m+qe.value.from-1,D=m+qe.value.to-1;for(let V=g;V<=D;V++)t[V].color=ae.value,t[V].editRange=!0;qe.value.includeFrom===!0&&(t[g].editRangeFrom=!0),qe.value.includeTo===!0&&(t[D].editRangeTo=!0)}y.value.year===U.value.year&&y.value.month===U.value.month&&(t[m+U.value.day-1].today=!0);const w=t.length%7;if(w>0){const g=7-w;for(let D=1;D<=g;D++)t.push({i:D,fill:!0})}return t.forEach(g=>{let D="q-date__calendar-item ";g.fill===!0?D+="q-date__calendar-item--fill":(D+=`q-date__calendar-item--${g.in===!0?"in":"out"}`,g.range!==void 0&&(D+=` q-date__range${g.rangeTo===!0?"-to":g.rangeFrom===!0?"-from":""}`),g.editRange===!0&&(D+=` q-date__edit-range${g.editRangeFrom===!0?"-from":""}${g.editRangeTo===!0?"-to":""}`),(g.range!==void 0||g.editRange===!0)&&(D+=` text-${g.color}`)),g.classes=D}),t}),Kt=p(()=>e.disable===!0?{"aria-disabled":"true"}:{});ce(()=>e.modelValue,t=>{if(b===JSON.stringify(t))b=0;else{const n=dt(S.value,C.value);De(n.year,n.month,n)}}),ce(q,()=>{T.value!==null&&d.$el.contains(document.activeElement)===!0&&T.value.focus()}),ce(()=>y.value.year+"|"+y.value.month,()=>{s("navigation",{year:y.value.year,month:y.value.month})}),ce(Ce,t=>{ht(t,C.value,"mask"),S.value=t}),ce(_e,t=>{ht(S.value,t,"locale"),C.value=t});function Ae(t){b=JSON.stringify(t)}function it(){const{year:t,month:n,day:o}=U.value,c={...y.value,year:t,month:n,day:o},m=Oe.value[de(c)];(m===void 0||m.includes(c.day)===!1)&&Ue(c),Le(c.year,c.month)}function ea(t){jt(t)===!0&&(q.value=t)}function ta(t,n){["month","year"].includes(t)&&(t==="month"?mt:Re)(n===!0?-1:1)}function Le(t,n){q.value="Calendar",De(t,n)}function aa(t,n){if(e.range===!1||!t){E.value=null;return}const o=Object.assign({...y.value},t),c=n!==void 0?Object.assign({...y.value},n):o;E.value={init:o,initHash:ue(o),final:c,finalHash:ue(c)},Le(o.year,o.month)}function ut(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Be(t,n,o){return nn(t,n,o,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function dt(t,n){const o=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(o.length===0)return ct();const c=o[o.length-1],m=Be(c.from!==void 0?c.from:c,t,n);return m.dateHash===null?ct():m}function ct(){let t,n;if(e.defaultYearMonth!==void 0){const o=e.defaultYearMonth.split("/");t=parseInt(o[0],10),n=parseInt(o[1],10)}else{const o=U.value!==void 0?U.value:v();t=o.year,n=o.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+k(n)+"/01"}}function mt(t){let n=y.value.year,o=Number(y.value.month)+t;o===13?(o=1,n++):o===0&&(o=12,n--),De(n,o),ve.value===!0&&Te("month")}function Re(t){const n=Number(y.value.year)+t;De(n,y.value.month),ve.value===!0&&Te("year")}function na(t){De(t,y.value.month),q.value=e.defaultView==="Years"?"Months":"Calendar",ve.value===!0&&Te("year")}function la(t){De(y.value.year,t),q.value="Calendar",ve.value===!0&&Te("month")}function oa(t,n){(Oe.value[n]?.includes(t.day)===!0?Ze:Ue)(t)}function ye(t){return{year:t.year,month:t.month,day:t.day}}function De(t,n,o){if(P.value!==null&&t<=P.value.year&&((n<P.value.month||t<P.value.year)&&(n=P.value.month),t=P.value.year),A.value!==null&&t>=A.value.year&&((n>A.value.month||t>A.value.year)&&(n=A.value.month),t=A.value.year),o!==void 0){const{hour:m,minute:w,second:g,millisecond:D,timezoneOffset:V,timeHash:Ve}=o;Object.assign(y.value,{hour:m,minute:w,second:g,millisecond:D,timezoneOffset:V,timeHash:Ve})}const c=t+"/"+k(n)+"/01";c!==y.value.dateHash&&(G.value=y.value.dateHash<c==(l.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(I.value=G.value),pt(()=>{fe.value=t-t%le-(t<0?le:0),Object.assign(y.value,{year:t,month:n,day:1,dateHash:c})}))}function ft(t,n,o){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:m,details:w}=vt(n,o);Ae(c),s("update:modelValue",c,m,w)}function Te(t){const n=Z.value[0]!==void 0&&Z.value[0].dateHash!==null?{...Z.value[0]}:{...y.value};pt(()=>{n.year=y.value.year,n.month=y.value.month;const o=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():Fe(n.year,n.month);n.day=Math.min(Math.max(1,n.day),o);const c=we(n),{details:m}=vt("",n);Ae(c),s("update:modelValue",c,t,m)})}function vt(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...ye(n.target),from:ye(n.from),to:ye(n.to)}}:{reason:`${t}-day`,details:ye(n)}}function we(t,n,o){return t.from!==void 0?{from:Me.value(t.from,n,o),to:Me.value(t.to,n,o)}:Me.value(t,n,o)}function Ue(t){let n;if(e.multiple===!0)if(t.from!==void 0){const o=ue(t.from),c=ue(t.to),m=Z.value.filter(g=>g.dateHash<o||g.dateHash>c),w=se.value.filter(({from:g,to:D})=>D.dateHash<o||g.dateHash>c);n=m.concat(w).concat(t).map(g=>we(g))}else{const o=ne.value.slice();o.push(we(t)),n=o}else n=we(t);ft(n,"add",t)}function Ze(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const o=we(t);t.from!==void 0?n=e.modelValue.filter(c=>c.from!==void 0?c.from!==o.from&&c.to!==o.to:!0):n=e.modelValue.filter(c=>c!==o),n.length===0&&(n=null)}ft(n,"remove",t)}function ht(t,n,o){const c=Z.value.concat(se.value).map(w=>we(w,t,n)).filter(w=>w.from!==void 0?w.from.dateHash!==null&&w.to.dateHash!==null:w.dateHash!==null),m=(e.multiple===!0?c:c[0])||null;Ae(m),s("update:modelValue",m,o)}function ra(){if(e.minimal!==!0)return _("div",{class:"q-date__header "+f.value},[_("div",{class:"relative-position"},[_(Ye,{name:"q-transition--fade"},()=>_("div",{key:"h-yr-"+ee.value,class:"q-date__header-subtitle q-date__header-link "+(q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...r("vY",{onClick(){q.value="Years"},onKeyup(t){t.keyCode===13&&(q.value="Years")}})},[ee.value]))]),_("div",{class:"q-date__header-title relative-position flex no-wrap"},[_("div",{class:"relative-position col"},[_(Ye,{name:"q-transition--fade"},()=>_("div",{key:"h-sub"+He.value,class:"q-date__header-title-label q-date__header-link "+(q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...r("vC",{onClick(){q.value="Calendar"},onKeyup(t){t.keyCode===13&&(q.value="Calendar")}})},[He.value]))]),e.todayBtn===!0?_(L,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,ariaLabel:l.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:u.value,onClick:it}):null])])}function ze({label:t,type:n,key:o,dir:c,goTo:m,boundaries:w,cls:g}){return[_("div",{class:"row items-center q-date__arrow"},[_(L,{round:!0,dense:!0,size:"sm",flat:!0,icon:ge.value[0],ariaLabel:n==="Years"?l.lang.date.prevYear:l.lang.date.prevMonth,tabindex:u.value,disable:w.prev===!1,...r("go-#"+n,{onClick(){m(-1)}})})]),_("div",{class:"relative-position overflow-hidden flex flex-center"+g},[_(Ye,{name:"q-transition--jump-"+c},()=>_("div",{key:o},[_(L,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:u.value,...r("view#"+n,{onClick:()=>{q.value=n}})})]))]),_("div",{class:"row items-center q-date__arrow"},[_(L,{round:!0,dense:!0,size:"sm",flat:!0,icon:ge.value[1],ariaLabel:n==="Years"?l.lang.date.nextYear:l.lang.date.nextMonth,tabindex:u.value,disable:w.next===!1,...r("go+#"+n,{onClick(){m(1)}})})])]}const sa={Calendar:()=>[_("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[_("div",{class:"q-date__navigation row items-center no-wrap"},ze({label:C.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:G.value,goTo:mt,boundaries:Pe.value.month,cls:" col"}).concat(ze({label:y.value.year,type:"Years",key:y.value.year,dir:I.value,goTo:Re,boundaries:Pe.value.year,cls:""}))),_("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Jt.value.map(t=>_("div",{class:"q-date__calendar-item"},[_("div",t)]))),_("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[_(Ye,{name:"q-transition--slide-"+G.value},()=>_("div",{key:W.value,class:"q-date__calendar-days fit"},st.value.map(t=>_("div",{class:t.classes},[t.in===!0?_(L,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:u.value,...r("day#"+t.i,{onClick:()=>{ia(t.i)},onMouseover:()=>{ua(t.i)}})},t.event!==!1?()=>_("div",{class:"q-date__event bg-"+t.event}):null):_("div",""+t.i)]))))])])],Months(){const t=y.value.year===U.value.year,n=c=>P.value!==null&&y.value.year===P.value.year&&P.value.month>c||A.value!==null&&y.value.year===A.value.year&&A.value.month<c,o=C.value.monthsShort.map((c,m)=>{const w=y.value.month===m+1;return _("div",{class:"q-date__months-item flex flex-center"},[_(L,{class:t===!0&&U.value.month===m+1?"q-date__today":null,flat:w!==!0,label:c,unelevated:w,color:w===!0?ae.value:null,textColor:w===!0?re.value:null,tabindex:u.value,disable:n(m+1),...r("month#"+m,{onClick:()=>{la(m+1)}})})])});return e.yearsInMonthView===!0&&o.unshift(_("div",{class:"row no-wrap full-width"},[ze({label:y.value.year,type:"Years",key:y.value.year,dir:I.value,goTo:Re,boundaries:Pe.value.year,cls:" col"})])),_("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},o)},Years(){const t=fe.value,n=t+le,o=[],c=m=>P.value!==null&&P.value.year>m||A.value!==null&&A.value.year<m;for(let m=t;m<=n;m++){const w=y.value.year===m;o.push(_("div",{class:"q-date__years-item flex flex-center"},[_(L,{key:"yr"+m,class:U.value.year===m?"q-date__today":null,flat:!w,label:m,dense:!0,unelevated:w,color:w===!0?ae.value:null,textColor:w===!0?re.value:null,tabindex:u.value,disable:c(m),...r("yr#"+m,{onClick:()=>{na(m)}})})]))}return _("div",{class:"q-date__view q-date__years flex flex-center"},[_("div",{class:"col-auto"},[_(L,{round:!0,dense:!0,flat:!0,icon:ge.value[0],ariaLabel:l.lang.date.prevRangeYears(le),tabindex:u.value,disable:c(t),...r("y-",{onClick:()=>{fe.value-=le}})})]),_("div",{class:"q-date__years-content col self-stretch row items-center"},o),_("div",{class:"col-auto"},[_(L,{round:!0,dense:!0,flat:!0,icon:ge.value[1],ariaLabel:l.lang.date.nextRangeYears(le),tabindex:u.value,disable:c(n),...r("y+",{onClick:()=>{fe.value+=le}})})])])}};function ia(t){const n={...y.value,day:t};if(e.range===!1){oa(n,W.value);return}if(E.value===null){const o=st.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&o.range!==void 0){Ze({target:n,from:o.range.from,to:o.range.to});return}if(o.selected===!0){Ze(n);return}const c=ue(n);E.value={init:n,initHash:c,final:n,finalHash:c},s("rangeStart",ye(n))}else{const o=E.value.initHash,c=ue(n),m=o<=c?{from:E.value.init,to:n}:{from:n,to:E.value.init};E.value=null,Ue(o===c?n:{target:n,...m}),s("rangeEnd",{from:ye(m.from),to:ye(m.to)})}}function ua(t){if(E.value!==null){const n={...y.value,day:t};Object.assign(E.value,{final:n,finalHash:ue(n)})}}return Object.assign(d,{setToday:it,setView:ea,offsetCalendar:ta,setCalendarTo:Le,setEditingRange:aa}),()=>{const t=[_("div",{class:"q-date__content col relative-position"},[_(Ye,{name:"q-transition--fade"},sa[q.value])])],n=Ft(a.default);return n!==void 0&&t.push(_("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&O(t,"push"),_("div",{class:Qe.value,...Kt.value},[ra(),_("div",{ref:T,class:"q-date__main col column",tabindex:-1},t)])}}}),Nt=at({name:"QPopupProxy",props:{...Ia,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:a,emit:s,attrs:d}){const{proxy:l}=nt(),{$q:i}=l,r=R(!1),u=R(null),f=p(()=>parseInt(e.breakpoint,10)),{canShow:Y}=At({showing:r});function v(){return i.screen.width<f.value||i.screen.height<f.value?"dialog":"menu"}const b=R(v()),Q=p(()=>b.value==="menu"?{maxHeight:"99vh"}:{});ce(()=>v(),S=>{r.value!==!0&&(b.value=S)});function O(S){r.value=!0,s("show",S)}function T(S){r.value=!1,b.value=v(),s("hide",S)}return Object.assign(l,{show(S){Y(S)===!0&&u.value.show(S)},hide(S){u.value.hide(S)},toggle(S){u.value.toggle(S)}}),Ca(l,"currentComponent",()=>({type:b.value,ref:u.value})),()=>{const S={ref:u,...Q.value,...d,onShow:O,onHide:T};let C;return b.value==="dialog"?C=Pt:(C=Na,Object.assign(S,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(C,S,a.default)}}}),rn={name:"AreaCrud",data(){return{loading:!1,rows:[],search:"",dlg:{show:!1,isEdit:!1,saving:!1},form:{id:null,area:"",curso1:null,curso2:null,curso3:null,curso4:null,curso5:null,curso6:null,titulo_fecha1:"",fecha1:"",titulo_fecha2:"",fecha2:"",lugar:"",modalidad:"",inscripcion:"",cupos_por_grado:null,reglas_especiales:null,min_integrantes:1,max_integrantes:10,grupo_mismo_curso:!1},coursesToggles:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},cupos:{1:null,2:null,3:null,4:null,5:null,6:null},reglasString:""}},computed:{rowsFiltered(){const e=(this.search||"").toLowerCase().trim();return e?this.rows.filter(a=>[a.area,a.lugar,a.modalidad,a.titulo_fecha1,a.titulo_fecha2].filter(Boolean).join(" ").toLowerCase().includes(e)):this.rows}},mounted(){this.fetchAreas()},methods:{async fetchAreas(){this.loading=!0;try{const{data:e}=await this.$axios.get("/areas");this.rows=e||[]}catch{this.$q.notify({type:"negative",message:"No se pudieron cargar las áreas"})}finally{this.loading=!1}},formatDate(e){if(!e)return"";try{const[a,s,d]=e.split("-").map(Number);return new Date(a,s-1,d).toLocaleDateString("es-BO",{year:"numeric",month:"long",day:"numeric"})}catch{return e}},coursesFromRow(e){const a={};for(let s=1;s<=6;s++){const d=e[`curso${s}`];d&&(a[`curso${s}`]=d)}return a},hasAnyCourse(e){for(let a=1;a<=6;a++)if(e[`curso${a}`])return!0;return!1},defaultCourseLabel(e){return`${e}º Secundaria`},openCreate(){this.dlg.isEdit=!1,this.dlg.show=!0,this.resetForm()},openEdit(e){this.dlg.isEdit=!0,this.dlg.show=!0,this.resetForm(),this.form={id:e.id,area:e.area||"",curso1:e.curso1||null,curso2:e.curso2||null,curso3:e.curso3||null,curso4:e.curso4||null,curso5:e.curso5||null,curso6:e.curso6||null,titulo_fecha1:e.titulo_fecha1||"",fecha1:e.fecha1||"",titulo_fecha2:e.titulo_fecha2||"",fecha2:e.fecha2||"",lugar:e.lugar||"",modalidad:e.modalidad||"",inscripcion:e.inscripcion||"",cupos_por_grado:e.cupos_por_grado||null,reglas_especiales:e.reglas_especiales||null,min_integrantes:e.min_integrantes??1,max_integrantes:e.max_integrantes??10,grupo_mismo_curso:!!e.grupo_mismo_curso};for(let s=1;s<=6;s++)this.coursesToggles[s]=!!this.form[`curso${s}`];const a=this.form.cupos_por_grado||{};for(let s=1;s<=6;s++)this.cupos[s]=a[String(s)]??null;this.reglasString=this.form.reglas_especiales?JSON.stringify(this.form.reglas_especiales,null,2):""},resetForm(){this.form={id:null,area:"",curso1:null,curso2:null,curso3:null,curso4:null,curso5:null,curso6:null,titulo_fecha1:"",fecha1:"",titulo_fecha2:"",fecha2:"",lugar:"",modalidad:"",inscripcion:"",cupos_por_grado:null,reglas_especiales:null,min_integrantes:1,max_integrantes:10,grupo_mismo_curso:!1},this.coursesToggles={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},this.cupos={1:null,2:null,3:null,4:null,5:null,6:null},this.reglasString=""},buildPayload(){for(let I=1;I<=6;I++)this.form[`curso${I}`]=this.coursesToggles[I]?this.defaultCourseLabel(I):null;const e={};for(let I=1;I<=6;I++){const $=this.cupos[I];$!==null&&$!==""&&!isNaN($)&&(e[String(I)]=Number($))}if(this.form.cupos_por_grado=Object.keys(e).length?e:null,(this.reglasString||"").trim()!=="")try{this.form.reglas_especiales=JSON.parse(this.reglasString)}catch{throw this.$q.notify({type:"warning",message:"El JSON de Reglas especiales no es válido."}),new Error("invalid_json")}else this.form.reglas_especiales=null;const a=Number(this.form.min_integrantes??1),s=Number(this.form.max_integrantes??1);if(!Number.isFinite(a)||a<1)throw this.$q.notify({type:"warning",message:"El mínimo de integrantes debe ser un número ≥ 1."}),new Error("invalid_min");if(!Number.isFinite(s)||s<a)throw this.$q.notify({type:"warning",message:"El máximo de integrantes debe ser ≥ al mínimo."}),new Error("invalid_max");this.form.min_integrantes=a,this.form.max_integrantes=s;const{id:d,area:l,curso1:i,curso2:r,curso3:u,curso4:f,curso5:Y,curso6:v,titulo_fecha1:b,fecha1:Q,titulo_fecha2:O,fecha2:T,lugar:S,modalidad:C,inscripcion:Ce,cupos_por_grado:_e,reglas_especiales:U,min_integrantes:y,max_integrantes:q,grupo_mismo_curso:pe}=this.form;return{id:d,payload:{area:l,curso1:i,curso2:r,curso3:u,curso4:f,curso5:Y,curso6:v,titulo_fecha1:b,fecha1:Q,titulo_fecha2:O,fecha2:T,lugar:S,modalidad:C,inscripcion:Ce,cupos_por_grado:_e,reglas_especiales:U,min_integrantes:y,max_integrantes:q,grupo_mismo_curso:pe}}},async save(){if(!await this.$refs.formRef.validate())return;let a,s;try{({id:a,payload:s}=this.buildPayload())}catch{return}this.dlg.saving=!0;try{this.dlg.isEdit&&a?(await this.$axios.put(`/areas/${a}`,s),this.$q.notify({type:"positive",message:"Área actualizada"})):(await this.$axios.post("/areas",s),this.$q.notify({type:"positive",message:"Área creada"})),this.dlg.show=!1,await this.fetchAreas()}catch(d){const l=d?.response?.data?.message||"No se pudo guardar el área";this.$q.notify({type:"negative",message:l})}finally{this.dlg.saving=!1}},confirmDelete(e){this.$q.dialog({title:"Eliminar",message:`¿Eliminar el área "${e.area}"? Esta acción no se puede deshacer.`,cancel:!0,persistent:!0,ok:{label:"Eliminar",color:"negative"},cancelLabel:"Cancelar"}).onOk(async()=>{try{await this.$axios.delete(`/areas/${e.id}`),this.$q.notify({type:"positive",message:"Área eliminada"}),await this.fetchAreas()}catch(a){const s=a?.response?.data?.message||"No se pudo eliminar";this.$q.notify({type:"negative",message:s})}})}}},sn={class:"col-12 col-md-4"},un={class:"col-12 col-md-8 text-right"},dn={class:"text-weight-medium"},cn={key:0,class:"text-grey"},mn={key:0},fn={key:1},vn={key:2,class:"text-grey"},hn={key:0},gn={key:1},yn={key:2,class:"text-grey"},_n={key:0},pn={key:2,class:"text-grey"},bn={class:"text-right"},Mn={class:"text-h6"},Dn={class:"row q-col-gutter-md"},wn={class:"col-12 col-md-6"},xn={class:"col-12 col-md-3"},Sn={class:"col-12 col-md-3"},Yn={class:"col-12 col-md-3"},Cn={class:"col-12 col-md-3"},kn={class:"col-12 col-md-6"},qn={class:"col-12 col-md-6"},Vn={class:"col-12"},Hn={class:"col-12"},On={class:"row q-col-gutter-sm"},Tn={class:"col-12"},En={class:"row q-col-gutter-sm"},jn={class:"col-12"},In={class:"row q-col-gutter-sm"},Nn={class:"col-12 col-md-3"},Fn={class:"col-12 col-md-3"},Qn={class:"col-12 col-md-6 flex items-center"},Pn={class:"col-12"},An={class:"row q-mt-md q-gutter-sm"};function Ln(e,a,s,d,l,i){return j(),$e(Ba,{class:"q-pa-md bg-grey-3"},{default:x(()=>[h(bt,{flat:"",bordered:"",class:"bg-white"},{default:x(()=>[h(Ee,{class:"row items-center q-col-gutter-md"},{default:x(()=>[M("div",sn,[h(z,{modelValue:l.search,"onUpdate:modelValue":a[0]||(a[0]=r=>l.search=r),filled:"",dense:"",label:"Buscar área...",clearable:""},{prepend:x(()=>[h(F,{name:"search"})]),_:1},8,["modelValue"])]),M("div",un,[h(L,{color:"primary",icon:"add",label:"Nueva Área",unelevated:"",onClick:i.openCreate},null,8,["onClick"])])]),_:1}),h(Mt),h(Ee,null,{default:x(()=>[h(Fa,{dense:"","wrap-cells":""},{default:x(()=>[a[19]||(a[19]=M("thead",null,[M("tr",{class:"bg-primary text-white"},[M("th",null,"Área"),M("th",null,"Cursos"),M("th",null,"Fechas"),M("th",null,"Lugar / Modalidad"),M("th",null,"Integrantes"),M("th",null,"Acciones")])],-1)),M("tbody",null,[(j(!0),B(je,null,Ie(i.rowsFiltered,r=>(j(),B("tr",{key:r.id},[M("td",dn,K(r.area),1),M("td",null,[(j(!0),B(je,null,Ie(i.coursesFromRow(r),(u,f)=>(j(),$e(xt,{key:f,color:"primary","text-color":"white",dense:"",square:"",class:"q-mr-xs q-mb-xs"},{default:x(()=>[X(K(u),1)]),_:2},1024))),128)),i.hasAnyCourse(r)?te("",!0):(j(),B("span",cn,"—"))]),M("td",null,[r.fecha1||r.titulo_fecha1?(j(),B("div",mn,[h(F,{name:"event",class:"q-mr-xs"}),X(" "+K(r.titulo_fecha1||"Fecha 1")+": ",1),M("b",null,K(i.formatDate(r.fecha1)),1)])):te("",!0),r.fecha2||r.titulo_fecha2?(j(),B("div",fn,[h(F,{name:"event",class:"q-mr-xs"}),X(" "+K(r.titulo_fecha2||"Fecha 2")+": ",1),M("b",null,K(i.formatDate(r.fecha2)),1)])):te("",!0),!r.fecha1&&!r.fecha2?(j(),B("span",vn,"—")):te("",!0)]),M("td",null,[r.lugar?(j(),B("div",hn,[h(F,{name:"place",class:"q-mr-xs"}),X(" "+K(r.lugar),1)])):te("",!0),r.modalidad?(j(),B("div",gn,[h(F,{name:"meeting_room",class:"q-mr-xs"}),X(" "+K(r.modalidad),1)])):te("",!0),!r.lugar&&!r.modalidad?(j(),B("span",yn,"—")):te("",!0)]),M("td",null,[r.min_integrantes||r.max_integrantes?(j(),B("div",_n,[h(Va,{color:"blue-8","text-color":"white",class:"q-mr-xs"},{default:x(()=>[X(K(r.min_integrantes||1)+" – "+K(r.max_integrantes||10),1)]),_:2},1024)])):te("",!0),r.grupo_mismo_curso?(j(),$e(xt,{key:1,dense:"",color:"orange-9","text-color":"white",icon:"rule"},{default:x(()=>a[16]||(a[16]=[X(" Mismo curso ")])),_:1,__:[16]})):te("",!0),!r.min_integrantes&&!r.max_integrantes&&!r.grupo_mismo_curso?(j(),B("span",pn,"—")):te("",!0)]),M("td",bn,[h(L,{dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:u=>i.openEdit(r)},{default:x(()=>[h(Vt,null,{default:x(()=>a[17]||(a[17]=[X("Editar")])),_:1,__:[17]})]),_:2},1032,["onClick"]),h(L,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:u=>i.confirmDelete(r)},{default:x(()=>[h(Vt,null,{default:x(()=>a[18]||(a[18]=[X("Eliminar")])),_:1,__:[18]})]),_:2},1032,["onClick"])])]))),128))])]),_:1,__:[19]})]),_:1}),h(Qa,{showing:l.loading},{default:x(()=>[h(Pa,{size:"40px"})]),_:1},8,["showing"])]),_:1}),h(Pt,{modelValue:l.dlg.show,"onUpdate:modelValue":a[15]||(a[15]=r=>l.dlg.show=r),persistent:""},{default:x(()=>[h(bt,{style:{"max-width":"980px",width:"100%"}},{default:x(()=>[h(Ee,{class:"row items-center"},{default:x(()=>[h(F,{name:l.dlg.isEdit?"edit":"add",class:"q-mr-sm text-primary"},null,8,["name"]),M("div",Mn,K(l.dlg.isEdit?"Editar área":"Nueva área"),1),h(Aa),Dt(h(L,{icon:"close",flat:"",round:"",dense:"",disable:l.dlg.saving},null,8,["disable"]),[[qt]])]),_:1}),h(Mt),h(Ee,null,{default:x(()=>[h(La,{ref:"formRef",onSubmit:qa(i.save,["prevent"])},{default:x(()=>[M("div",Dn,[M("div",wn,[h(z,{modelValue:l.form.area,"onUpdate:modelValue":a[1]||(a[1]=r=>l.form.area=r),filled:"",dense:"",label:"Nombre del área",rules:[r=>!!r||"Obligatorio"]},{prepend:x(()=>[h(F,{name:"school"})]),_:1},8,["modelValue","rules"])]),M("div",xn,[h(z,{modelValue:l.form.titulo_fecha1,"onUpdate:modelValue":a[2]||(a[2]=r=>l.form.titulo_fecha1=r),filled:"",dense:"",label:"Título Fecha 1"},{prepend:x(()=>[h(F,{name:"title"})]),_:1},8,["modelValue"])]),M("div",Sn,[h(z,{modelValue:l.form.fecha1,"onUpdate:modelValue":a[4]||(a[4]=r=>l.form.fecha1=r),filled:"",dense:"",label:"Fecha 1 (YYYY-MM-DD)",mask:"####-##-##"},{append:x(()=>[h(F,{name:"event",class:"cursor-pointer"},{default:x(()=>[h(Nt,{"transition-show":"scale","transition-hide":"scale"},{default:x(()=>[h(It,{modelValue:l.form.fecha1,"onUpdate:modelValue":a[3]||(a[3]=r=>l.form.fecha1=r),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),M("div",Yn,[h(z,{modelValue:l.form.titulo_fecha2,"onUpdate:modelValue":a[5]||(a[5]=r=>l.form.titulo_fecha2=r),filled:"",dense:"",label:"Título Fecha 2"},{prepend:x(()=>[h(F,{name:"title"})]),_:1},8,["modelValue"])]),M("div",Cn,[h(z,{modelValue:l.form.fecha2,"onUpdate:modelValue":a[7]||(a[7]=r=>l.form.fecha2=r),filled:"",dense:"",label:"Fecha 2 (YYYY-MM-DD)",mask:"####-##-##"},{append:x(()=>[h(F,{name:"event",class:"cursor-pointer"},{default:x(()=>[h(Nt,{"transition-show":"scale","transition-hide":"scale"},{default:x(()=>[h(It,{modelValue:l.form.fecha2,"onUpdate:modelValue":a[6]||(a[6]=r=>l.form.fecha2=r),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),M("div",kn,[h(z,{modelValue:l.form.lugar,"onUpdate:modelValue":a[8]||(a[8]=r=>l.form.lugar=r),filled:"",dense:"",label:"Lugar"},{prepend:x(()=>[h(F,{name:"place"})]),_:1},8,["modelValue"])]),M("div",qn,[h(z,{modelValue:l.form.modalidad,"onUpdate:modelValue":a[9]||(a[9]=r=>l.form.modalidad=r),filled:"",dense:"",label:"Modalidad (Presencial/Virtual)"},{prepend:x(()=>[h(F,{name:"meeting_room"})]),_:1},8,["modelValue"])]),M("div",Vn,[h(z,{modelValue:l.form.inscripcion,"onUpdate:modelValue":a[10]||(a[10]=r=>l.form.inscripcion=r),type:"textarea",filled:"",autogrow:"",label:"Notas/Información de inscripción"},null,8,["modelValue"])]),M("div",Hn,[h(We,{class:"bg-grey-1 q-mb-sm"},{avatar:x(()=>[h(F,{name:"class",color:"primary"})]),default:x(()=>[a[20]||(a[20]=X(" Selecciona los cursos habilitados (si está activado se guarda su rótulo). "))]),_:1,__:[20]}),M("div",On,[(j(),B(je,null,Ie(6,r=>M("div",{key:r,class:"col-6 col-md-2"},[h(wt,{modelValue:l.coursesToggles[r],"onUpdate:modelValue":u=>l.coursesToggles[r]=u,label:i.defaultCourseLabel(r)},null,8,["modelValue","onUpdate:modelValue","label"])])),64))])]),M("div",Tn,[h(We,{class:"bg-grey-1 q-mb-sm"},{avatar:x(()=>[h(F,{name:"format_list_numbered",color:"primary"})]),default:x(()=>[a[21]||(a[21]=X(" Cupos por grado (opcional). "))]),_:1,__:[21]}),M("div",En,[(j(),B(je,null,Ie(6,r=>M("div",{key:"cupo"+r,class:"col-6 col-md-2"},[h(z,{modelValue:l.cupos[r],"onUpdate:modelValue":u=>l.cupos[r]=u,modelModifiers:{number:!0},type:"number",min:"0",filled:"",dense:"",label:`Cupo ${r}º`},null,8,["modelValue","onUpdate:modelValue","label"])])),64))])]),M("div",jn,[h(We,{class:"bg-grey-1 q-mb-sm"},{avatar:x(()=>[h(F,{name:"group",color:"primary"})]),default:x(()=>[a[22]||(a[22]=X(" Límites de integrantes por grupo y regla de pertenecer al mismo curso. "))]),_:1,__:[22]}),M("div",In,[M("div",Nn,[h(z,{modelValue:l.form.min_integrantes,"onUpdate:modelValue":a[11]||(a[11]=r=>l.form.min_integrantes=r),modelModifiers:{number:!0},type:"number",min:1,filled:"",dense:"",label:"Mínimo integrantes"},null,8,["modelValue"])]),M("div",Fn,[h(z,{modelValue:l.form.max_integrantes,"onUpdate:modelValue":a[12]||(a[12]=r=>l.form.max_integrantes=r),modelModifiers:{number:!0},type:"number",min:1,filled:"",dense:"",label:"Máximo integrantes"},null,8,["modelValue"])]),M("div",Qn,[h(wt,{modelValue:l.form.grupo_mismo_curso,"onUpdate:modelValue":a[13]||(a[13]=r=>l.form.grupo_mismo_curso=r),label:"Todos del mismo curso"},null,8,["modelValue"])])])]),M("div",Pn,[h(z,{modelValue:l.reglasString,"onUpdate:modelValue":a[14]||(a[14]=r=>l.reglasString=r),type:"textarea",filled:"",autogrow:"",label:"Reglas especiales (JSON, opcional)",hint:'Ej: {"quimica_experimental":{"grupo_min":3,"grupo_max":4}}'},null,8,["modelValue"])])]),M("div",An,[h(L,{loading:l.dlg.saving,type:"submit",color:"primary",label:l.dlg.isEdit?"Guardar":"Crear"},null,8,["loading","label"]),Dt(h(L,{flat:"",color:"grey-7",label:"Cancelar",disable:l.dlg.saving},null,8,["disable"]),[[qt]])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const el=ka(rn,[["render",Ln]]);export{el as default};
