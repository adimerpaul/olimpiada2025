import{j as v,F as b,G as Q,g as k,k as p,l as I,m as w,_ as q,c as m,o as d,w as n,a,b as t,Q as S,ag as u,e as c,a3 as x,a6 as C,a4 as N,t as r,d as $,ah as y,a7 as z,ai as D}from"./index-DjedoNJp.js";import{Q as B}from"./QBanner-RyH8TlbD.js";import{Q as P}from"./QMarkupTable-CTS_xb0T.js";import{Q as T,a as A}from"./QInnerLoading-DaxcO_gM.js";import{Q as F}from"./QPage-BGWxAykp.js";import{b as L,c as V}from"./QLayout-DZtfTCXW.js";import{g as E}from"./inscripcion-pdf-BHbUBJGX.js";const G=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],M=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],_=v({name:"QSkeleton",props:{...b,tag:{type:String,default:"div"},type:{type:String,validator:e=>G.includes(e),default:"rect"},animation:{type:String,validator:e=>M.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:s}){const o=k(),f=Q(e,o.proxy.$q),i=p(()=>{const l=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:l[0],height:l[1]}}),g=p(()=>`q-skeleton q-skeleton--${f.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>I(e.tag,{class:g.value,style:i.value},w(s.default))}}),O={name:"InscripcionesPublic",data(){return{loading:!1,error:"",ins:null,area:null,integrantes:[]}},computed:{id(){return this.$route.params.id},fechaIns(){const e=this.ins?.created_at;return e?this.$filters.dateDmYHis(e):""}},async created(){await this.fetchInscripcion()},methods:{async fetchInscripcion(){this.loading=!0,this.error="";try{const{data:e}=await this.$axios.get(`/inscritos/${this.id}`);this.ins=e,this.area=e?.area||null,this.integrantes=this.normalizeIntegrantes(e)}catch(e){this.error=e?.response?.status===404?"Inscripción no encontrada.":e?.response?.data?.message||"No se pudo cargar la inscripción."}finally{this.loading=!1}},normalizeIntegrantes(e){const s=[];for(let o=1;o<=10;o++)e[`estudiante${o}`]&&s.push({nombre:e[`estudiante${o}`],ci:e[`ci${o}`]||"",curso:e[`curso${o}`]||"",tutor:e[`tutor${o}`]||"",telefono:e[`telefono${o}`]||""});return s},fileUrl(e){return`${this.$url}../storage/${e}`},async descargarPdf(){try{await E({inscrito:this.ins,area:this.area,integrantes:this.integrantes,baseUrl:window.location.origin})}catch{this.$q.notify({type:"warning",message:"No se pudo generar el PDF."})}}}},j={class:"row justify-center"},H={class:"col-12 col-md-10"},R={class:"col"},U={class:"text-caption text-grey-7"},Y={class:"q-pa-md bg-grey-1",style:{"border-radius":"12px"}},J={class:"row q-col-gutter-md items-center"},K={class:"col-12 col-md"},W={class:"text-subtitle1 text-weight-medium"},X={class:"col-6 col-md"},Z={class:"text-body1"},tt={class:"col-6 col-md"},et={class:"text-body1 ellipsis"},st={class:"col-12 col-md"},at={class:"text-body1"},nt={key:0};function it(e,s,o,f,i,g){return d(),m(V,{view:"lHh Lpr lFf"},{default:n(()=>[a(L,null,{default:n(()=>[a(F,{class:"q-pa-md bg-grey-3"},{default:n(()=>[t("div",j,[t("div",H,[a(S,{flat:"",bordered:"",class:"bg-white"},{default:n(()=>[a(c,{class:"row items-center"},{default:n(()=>[a(x,{square:"",size:"40px",class:"q-mr-sm"},{default:n(()=>s[0]||(s[0]=[t("img",{src:"/images.png"},null,-1)])),_:1,__:[0]}),s[2]||(s[2]=t("div",{class:"col"},[t("div",{class:"text-caption"},"VIII OLIMPIADA DE"),t("div",{class:"text-subtitle1 text-weight-bold"},"CIENCIA Y TECNOLOGÍA F.N.I.")],-1)),a(x,{square:"",size:"40px"},{default:n(()=>s[1]||(s[1]=[t("img",{src:"/logo_fni.png"},null,-1)])),_:1,__:[1]})]),_:1,__:[2]}),a(C),i.loading?(d(),m(c,{key:0,class:"text-grey-7"},{default:n(()=>[a(_,{type:"text"}),a(_,{type:"rect",height:"120px"})]),_:1})):i.error?(d(),m(B,{key:1,class:"bg-red-1 text-red-10"},{avatar:n(()=>[a($,{name:"error",color:"red-10"})]),default:n(()=>[N(" "+r(i.error),1)]),_:1})):(d(),u(y,{key:2},[a(c,{class:"row items-center"},{default:n(()=>[t("div",R,[s[3]||(s[3]=t("div",{class:"text-h6"},"Constancia de Inscripción",-1)),t("div",U," Fecha: "+r(g.fechaIns)+" · ID: "+r(i.ins?.id),1)]),s[4]||(s[4]=t("div",{class:"col-auto q-gutter-xs"},null,-1))]),_:1,__:[4]}),a(c,null,{default:n(()=>[t("div",Y,[t("div",J,[t("div",K,[s[5]||(s[5]=t("div",{class:"text-caption text-grey-7"},"Área",-1)),t("div",W,r(i.area?.area||"-"),1)]),t("div",X,[s[6]||(s[6]=t("div",{class:"text-caption text-grey-7"},"Modalidad",-1)),t("div",Z,r(i.area?.modalidad||"-"),1)]),t("div",tt,[s[7]||(s[7]=t("div",{class:"text-caption text-grey-7"},"Lugar",-1)),t("div",et,r(i.area?.lugar||"—"),1)]),t("div",st,[s[8]||(s[8]=t("div",{class:"text-caption text-grey-7"},"Grupo",-1)),t("div",at,r(i.ins?.grupo_nombre||"—"),1)])])])]),_:1}),a(c,null,{default:n(()=>[a(P,{flat:"",bordered:""},{default:n(()=>[s[10]||(s[10]=t("thead",null,[t("tr",{class:"bg-primary text-white"},[t("th",{class:"text-left"},"#"),t("th",{class:"text-left"},"Nombre"),t("th",{class:"text-left"},"CI"),t("th",{class:"text-left"},"Curso"),t("th",{class:"text-left"},"Tutor"),t("th",{class:"text-left"},"Teléfono")])],-1)),t("tbody",null,[(d(!0),u(y,null,D(i.integrantes,(l,h)=>(d(),u("tr",{key:h},[t("td",null,r(h+1),1),t("td",null,r(l.nombre),1),t("td",null,r(l.ci||"—"),1),t("td",null,r(l.curso||"—"),1),t("td",null,r(l.tutor||"—"),1),t("td",null,r(l.telefono||"—"),1)]))),128)),i.integrantes.length?z("",!0):(d(),u("tr",nt,s[9]||(s[9]=[t("td",{colspan:"6",class:"text-grey-7"},"Sin integrantes",-1)])))])]),_:1,__:[10]})]),_:1})],64)),a(T,{showing:i.loading},{default:n(()=>[a(A,{size:"40px"})]),_:1},8,["showing"])]),_:1})])])]),_:1})]),_:1})]),_:1})}const mt=q(O,[["render",it]]);export{mt as default};
